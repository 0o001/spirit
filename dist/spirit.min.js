/*!
 * Spirit.js v2.0.1
 * (c) 2017 Patrick Brouwer
 * Released under the MIT License.
 */
(function(){function e(){}function t(e,t,n){var r=this,i=function(t){return(0,rr.isFunction)(r.toObject)?r.toObject():Z({},e,void 0!==t?t:n)},o=this["_"+e];o&&"function"==typeof o.toArray?o=o.toArray():o&&"function"==typeof o.toObject&&(o=o.toObject());var s=void 0;if(o!==n&&(s=i(o)),t.call(this,n),this._list instanceof yr.default&&this._list._duplicates!==!0)try{this._list.checkOnDuplicates()}catch(e){throw t.call(this,o),e}if(o!==n){var a=o&&(0,rr.isFunction)(o.toObject)?o.toObject():o,u=n&&(0,rr.isFunction)(n.toObject)?n.toObject():n,l={type:e,from:a,to:u},c=void 0;try{c=i()}catch(t){c=Z({},e,n)}var f={previous:s,current:c,changed:l},p=["change",f],h=["change:"+e,f,n];if(this.emit.apply(this,p),this.emit.apply(this,h),this._list&&this._list instanceof E.EventEmitter){var d,v;(d=this._list).emit.apply(d,p),(v=this._list).emit.apply(v,h)}}}function n(e,t,n){var r=e.reduce(function(e,t){return t.validator(n)||e.push(t.message),e},[]);if(r.length>0)throw new Yn.Error(""+r[0]);this["_"+t]=n}function r(e){return this["_"+e]}function i(){void 0===Nn&&(Nn={isBrowser:f},Fn.value=!0,qn(Nn,"__esModule",Fn))}function o(){void 0===rr&&(rr={isObject:A,isSVG:T,isFunction:L},Fn.value=!0,qn(rr,"__esModule",Fn))}function s(){void 0===Or&&(pr={has:p,ensure:v,generateTimeline:F,killTimeline:R},dr={bubbleEvent:U,createEventObjectForModel:q,clearEvents:X},vr={objectToArray:V,arrayToObject:z},mr={getExpression:H,getElement:J},gr={emitChange:Q},Or={context:Nn,gsap:pr,events:dr,convert:vr,xpath:mr,is:rr,emitter:gr,loadscript:d,jsonloader:W,autobind:re,debug:h},Fn.value=!0,qn(pr,"__esModule",Fn),Fn.value=!0,qn(dr,"__esModule",Fn),Fn.value=!0,qn(vr,"__esModule",Fn),Fn.value=!0,qn(mr,"__esModule",Fn),Fn.value=!0,qn(gr,"__esModule",Fn),Fn.value=!0,qn(Or,"__esModule",Fn))}function a(){void 0===Ir&&(Ir={default:Tr},Fn.value=!0,qn(Ir,"__esModule",Fn))}function u(){void 0===Gr&&(Gr={EvalMap:B,Group:ce,Groups:de,Keyframe:O,Keyframes:we,Prop:I,Props:_e,Timeline:Kt,Timelines:le},Fn.value=!0,qn(Gr,"__esModule",Fn))}function l(e,t){"use strict";if(!(e instanceof t))throw new Yn.TypeError("Cannot call a class as a function")}function c(){"use strict";l(this,c),this.debug=!0,this.gsap={tween:null,timeline:null,autoInject:!0,autoInjectUrl:"https://unpkg.com/gsap/src/minified/TweenMax.min.js"}}function f(){"use strict";return"window"in Zn&&"document"in Zn}function p(){"use strict";return void 0===Gn&&(Gn={default:Jn}),!(!Gn.default.gsap.tween||!Gn.default.gsap.timeline)}function h(){"use strict";return void 0===Bn&&(i(),Bn={default:Jn}),!1}function d(e){"use strict";return void 0===Nn&&i(),(0,Nn.isBrowser)()?new Yn.Promise(function(t,n){var r=Yn.document.createElement("script");r.src=e,r.async=!0,r.onload=function(){Yn.document.body.removeChild(r),t()},r.onerror=function(){Yn.document.body.removeChild(r),n(new Yn.Error("Could not load script "+e))},Yn.document.body.appendChild(r)}):Yn.Promise.reject(new Yn.Error("Script can only be loaded in browser: "+e))}function v(){"use strict";return void 0===$n&&(void 0===Gn&&(Gn={default:Jn}),$n={default:h},Qn={default:d}),p()?Yn.Promise.resolve():Gn.default.gsap.autoInject?((0,$n.default)()&&Yn.console.warn("\n      \n      GSAP is being fetched from CDN: "+Gn.default.gsap.autoInjectUrl+".\n      If you already have GSAP installed, please provide it to Spirit:\n      \n        spirit.setup({\n          tween: TweenMax,\n          timeline: TimelineMax\n        })\n      \n      You want to use another cdn? Change it here:\n       \n        spirit.config.gsap.autoInjectUrl = 'https://cdn.xxx'\n      \n    "),(0,Qn.default)(Gn.default.gsap.autoInjectUrl).then(function(){return Gn.default.gsap.tween=Yn.window.TweenMax,Gn.default.gsap.timeline=Yn.window.TimelineMax,Yn.Promise.resolve()})):((0,$n.default)()&&Yn.console.warn('\n      \n        It seems that you have disabled autoInject. GSAP can not be found by Spirit.\n        Please make sure you provide the tween and timeline to Spirit.\n      \n        For example:\n        \n        spirit.setup({\n          tween: TweenMax,\n          timeline: TimelineMax\n        })\n        \n        Or enable the autoInject "spirit.config.gsap.autoInject = true".\n        \n      '),Yn.Promise.reject(new Yn.Error("GSAP not found.")))}function m(e,t){"use strict";if(!(e instanceof t))throw new Yn.TypeError("Cannot call a class as a function")}function y(e,t){"use strict";if(!e)throw new Yn.ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function g(e,t){"use strict";if(!(e instanceof t))throw new Yn.TypeError("Cannot call a class as a function")}function b(e,t){"use strict";if(!e)throw new Yn.ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _(e,t){"use strict";if(!(e instanceof t))throw new Yn.TypeError("Cannot call a class as a function")}function w(e,t){"use strict";if(!e)throw new Yn.ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function O(e,t){"use strict";var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;_(this,O);var r=w(this,(O.__proto__||Yn.Object.getPrototypeOf(O)).call(this));return r._list=null,r._value=null,r.mappings=[],r.setMaxListeners(Yn.Infinity),n=n||null,Yn.Object.assign(r,{time:e,value:t,ease:n}),r}function E(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function j(e,t){return e.listenerCount(t)}function k(e,t){"use strict";if(!(e instanceof t))throw new Yn.TypeError("Cannot call a class as a function")}function x(e,t){"use strict";if(!e)throw new Yn.ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function P(e){"use strict";if(Yn.Array.isArray(e)){for(var t=0,n=Yn.Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Yn.Array.from(e)}function A(e){"use strict";return"[object Object]"===Yn.Object.prototype.toString.call(e)}function T(e){"use strict";return e instanceof Yn.window.SVGElement}function L(e){"use strict";return"function"==typeof e}function S(){"use strict";void 0===rr&&o();var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;k(this,S);var r=x(this,(S.__proto__||Yn.Object.getPrototypeOf(S)).call(this));if(r._list=[],r._model=null,r._duplicates=!0,r._sortOn=!1,r._linkedList=!1,r.setMaxListeners(Yn.Infinity),r._model=t,t){var i=void 0!==n?new(Yn.Function.prototype.bind.apply(t,[null].concat(P(n)))):new t;if("function"!=typeof i.toObject)throw new Yn.Error("Invalid Model prototype. model.toObject does not exist.")}if(!Yn.Array.isArray(e))throw new Yn.Error("Items should be an array");return r._list=e.reduce(function(e,n){if(r._model)if(n instanceof r._model)n._list=r,n.setupBubbleEvents&&"function"==typeof n.setupBubbleEvents&&n.setupBubbleEvents(),e.push(n);else{if(!rr.isObject(n)||"function"!=typeof t.fromObject)throw new Yn.Error("Could not parse item from model");var i=t.fromObject(n);i._list=r,i.setupBubbleEvents&&"function"==typeof i.setupBubbleEvents&&i.setupBubbleEvents(),e.push(i)}else e.push(n);return e},[]),r}function M(e,t){"use strict";if(!(e instanceof t))throw new Yn.TypeError("Cannot call a class as a function")}function C(e,t){"use strict";if(!e)throw new Yn.ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function I(e){"use strict";void 0===ir&&(ir={default:we});var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ir.default;M(this,I);var n=C(this,(I.__proto__||Yn.Object.getPrototypeOf(I)).call(this));return n._keyframes=null,n._list=null,n.setMaxListeners(Yn.Infinity),t instanceof ir.default||(t=new ir.default(t)),e=e||null,Yn.Object.assign(n,{name:e,keyframes:t}),n}function N(e,t){"use strict";if(!(e instanceof t))throw new Yn.TypeError("Cannot call a class as a function")}function G(e,t){"use strict";if(!(e instanceof t))throw new Yn.TypeError("Cannot call a class as a function")}function B(e,t){"use strict";if(G(this,B),!e||e&&!(e instanceof Yn.RegExp))throw new Yn.Error("Invalid expression.");if(null===t||void 0===t)throw new Yn.Error("Invalid mapping.");Yn.Object.assign(this,{regex:e,map:t})}function D(e,t,n){"use strict";return t in e?Yn.Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function F(e){"use strict";if(void 0===fr&&(void 0===Gn&&(Gn={default:Jn}),fr={default:Kt}),!(e&&e instanceof fr.default))throw new Yn.Error("Need valid timeline data to generate GSAP timeline from");if(!Gn.default.gsap.timeline)throw new Yn.Error("GSAP not set. Please make sure GSAP is available.");if("dom"!==e.type)throw new Yn.Error("Timeline invalid. Needs a timeline with type of dom.");var t=new Gn.default.gsap.timeline({paused:!0}),n=e.props.get("transformOrigin");return e.props.each(function(r){if(0!==r.keyframes.length&&"transformOrigin"!==r.name&&"svgOrigin"!==r.name)for(var i=r.keyframes.at(0),o=function(){var o=i,s=o.value,a=o.ease,u=o.time,l=i.prev(),c=l?l.time:0,f=l?u-l.time:u,p={ease:a||"Linear.easeNone"},h=D({},r.name,s);if(/\./.test(r.name)){for(var d=r.name.split("."),v=d.pop(),m={},y=m;d.length>0;){var g=d.shift();m[g]={},m=m[g]}m[v]=s,h=y}if(p=cr({},p,h),0===u&&(p.immediateRender=!0),r.isCSSTransform()){var b="50% 50%";if(n&&n.keyframes.list.length>0){var _=n.keyframes.list.filter(function(e){return 0===u?e.time<=u:e.time<u}).sort(function(e,t){return e.time<t.time});b=_.length>0&&_[0].value||b}p.transformOrigin=b}t.to(e.transformObject,f,p,c),i=i.next()};i;)o()}),t}function R(e){"use strict";if(void 0===Gn&&(Gn={default:Jn}),e&&e instanceof Gn.default.gsap.timeline){var t=e.getChildren();e.kill();for(var n=0;n<t.length;n++)t[n]&&t[n]instanceof Gn.default.gsap.timeline?R(t[n]):null!==t[n].target&&Gn.default.gsap.tween.set(t[n].target,{clearProps:"all"});e.clear()}}function U(e,t){"use strict";if(void 0===hr&&(hr={default:S}),!(t instanceof E.EventEmitter))throw new Yn.Error("Scope needs to be an event emitter.");return function(){if(this.emit.apply(this,[e].concat(Yn.Array.prototype.slice.call(arguments))),this._list instanceof hr.default){var t;(t=this._list).emit.apply(t,[e].concat(Yn.Array.prototype.slice.call(arguments)))}}.bind(t)}function Y(e,t,n){"use strict";return t in e?Yn.Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function q(e,t,n,r,i){"use strict";var o={prevModel:e.fromObject(t),model:e.fromObject(cr({},t,Y({},n,i))),changed:{type:n,from:r,to:i}};return o}function X(e){"use strict";var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e.eventNames&&"function"==typeof e.eventNames?e.eventNames().forEach(function(t){return e.removeAllListeners(t)}):t.forEach(function(t){return e.removeAllListeners(t)})}function K(e,t,n){"use strict";return t in e?Yn.Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function V(e){"use strict";return Yn.Object.keys(e).reduce(function(t,n){return t.push(K({},n,e[n])),t},[])}function z(e){"use strict";return e.reduce(function(e,t){return e=cr({},e,t)},{})}function H(e){"use strict";void 0===rr&&o();for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=[],r=function(){return!t||t!==e};e.nodeType===Yn.window.Node.ELEMENT_NODE&&r();){for(var i=0,s=e.previousSibling;s;s=s.previousSibling)s.nodeType!==Yn.window.Node.DOCUMENT_TYPE_NODE&&s.nodeName===e.nodeName&&++i;var a=e.nodeName.toLowerCase(),u="["+(i+1)+"]";(0,rr.isSVG)(e)&&(a="*[local-name()='"+a+"']"),n.unshift(a+u),e=e.parentNode}return 0===n.length?null:t?n.join("/"):"/"+n.join("/")}function J(e){"use strict";var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t||(t=Yn.document.body);var n=Yn.document.evaluate(e,t,null,Yn.window.XPathResult.ANY_TYPE,null);return n.iterateNext()}function Z(e,t,n){"use strict";return t in e?Yn.Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $(e,t,n){"use strict";void 0===zr&&(zr=null,o(),void 0===yr&&(yr={default:S}));var r=n.set;if(!E.EventEmitter.prototype.isPrototypeOf(e)&&!E.EventEmitter.prototype.isPrototypeOf(e.prototype))throw new Yn.Error("@emitter.emitChange can only be applied to event emitters");return cr({},n,{configurable:!0,set:function(e){var n=this,i=function(r){return(0,rr.isFunction)(n.toObject)?n.toObject():Z({},t,void 0!==r?r:e)},o=this["_"+t];o&&"function"==typeof o.toArray?o=o.toArray():o&&"function"==typeof o.toObject&&(o=o.toObject());var s=void 0;if(o!==e&&(s=i(o)),r.call(this,e),this._list instanceof yr.default&&this._list._duplicates!==!0)try{this._list.checkOnDuplicates()}catch(e){throw r.call(this,o),e}if(o!==e){var a=o&&(0,rr.isFunction)(o.toObject)?o.toObject():o,u=e&&(0,rr.isFunction)(e.toObject)?e.toObject():e,l={type:t,from:a,to:u},c=void 0;try{c=i()}catch(n){c=Z({},t,e)}var f={previous:s,current:c,changed:l},p=["change",f],h=["change:"+t,f,e];if(this.emit.apply(this,p),this.emit.apply(this,h),this._list&&this._list instanceof E.EventEmitter){var d,v;(d=this._list).emit.apply(d,p),(v=this._list).emit.apply(v,h)}}}})}function Q(e){"use strict";var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return e?function(r){var i;Yn.Object.defineProperties(r.prototype,(i={},Z(i,"_"+e,{value:t,writable:!0,enumerable:!1,configurable:!0}),Z(i,e,{configurable:!0,get:function(){return this["_"+e]},set:function(t){var r=n.reduce(function(e,n){return n.validator(t)||e.push(n.message),e},[]);if(r.length>0)throw new Yn.Error(""+r[0]);this["_"+e]=t}}),i));var o=Yn.Object.getOwnPropertyDescriptor(r.prototype,e);Yn.Object.defineProperty(r.prototype,e,$(r,e,o))}:$}function W(e){"use strict";if(void 0===br&&(i(),br={},_r={}),!(0,Nn.isBrowser)())return Yn.Promise.reject(new Yn.Error("Invalid context. jsonLoader can only be used in browser."));if(e in br)return Yn.Promise.resolve(br[e]);if(e in _r)return _r[e];var t=new Yn.Promise(function(t,n){var r=new XMLHttpRequest;r.onreadystatechange=function(){if(4===this.readyState&&200===this.status)try{var r=Yn.JSON.parse(this.responseText);br[e]=r,t(r),delete _r[e]}catch(t){n(new Yn.Error("jsonLoader: Invalid json for request "+e))}};try{r.open("GET",Yn.encodeURI(e),!0),r.send()}catch(t){n(new Yn.Error("Could not open request. Unable to load "+e))}});return _r[e]||(_r[e]=t),t}function ee(e){"use strict";return typeof e}function te(e,t,n){"use strict";var r=n.value;if("function"!=typeof r)throw new Yn.Error("@autobind decorator can only be applied to methods not: "+("undefined"==typeof r?"undefined":ee(r)));return{configurable:!0,get:function(){if(this===e.prototype||this.hasOwnProperty(t))return r;var n=r.bind(this);return Yn.Object.defineProperty(this,t,{value:n,configurable:!0,writable:!0}),n},set:function(){return r}}}function ne(e){"use strict";void 0===wr&&(wr=["constructor"]);var t=Yn.Object.getOwnPropertyNames(e.prototype);return"function"==typeof Yn.Object.getOwnPropertySymbols&&(t=t.concat(Yn.Object.getOwnPropertySymbols(e.prototype))),t.forEach(function(t){if(!wr.includes(t)){var n=Yn.Object.getOwnPropertyDescriptor(e.prototype,t);"function"==typeof n.value&&Yn.Object.defineProperty(e.prototype,t,te(e,t,n))}}),e}function re(){"use strict";return 1===arguments.length?ne.apply(void 0,arguments):te.apply(void 0,arguments)}function ie(e){"use strict";return void 0===Er&&(o(),i(),s(),Er={default:Jn},jr={default:h}),new Yn.Promise(function(t,n){var r=void 0,i=void 0;Or.is.isObject(e)&&("function"==typeof e.timeline&&"function"==typeof e.tween&&(r=e.timeline,i=e.tween),"boolean"==typeof e.debug&&(Er.default.debug=e.debug)),(0,jr.default)()&&Yn.console.warn("You are running the development build of Spirit v2.0.1."),i&&r?(Er.default.gsap.tween=i,Er.default.gsap.timeline=r,t()):Or.gsap.ensure().then(t).catch(n)})}function oe(e,t){"use strict";if(!(e instanceof t))throw new Yn.TypeError("Cannot call a class as a function")}function se(e,t){"use strict";if(!e)throw new Yn.ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function ae(e,t){"use strict";if(!(e instanceof t))throw new Yn.TypeError("Cannot call a class as a function")}function ue(e,t){"use strict";if(!e)throw new Yn.ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function le(){"use strict";void 0===Pr&&(Pr={default:Kt});var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return ae(this,le),ue(this,(le.__proto__||Yn.Object.getPrototypeOf(le)).call(this,e,Pr.default,["object",{}]))}function ce(){"use strict";void 0===Sr&&(Sr={default:le});var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};oe(this,ce);var t=se(this,(ce.__proto__||Yn.Object.getPrototypeOf(ce)).call(this));if(t._name="untitled",t._timeScale=1,t._timelines=new Sr.default,t.timeline=null,t.setMaxListeners(Yn.Infinity),!e.name||"string"!=typeof e.name||""===e.name.trim())throw new Yn.Error("Cannot create group without a name.");var n={name:"untitled",timeScale:1,timelines:new Sr.default};return Yn.Object.assign(t,cr({},n,e)),t}function fe(e){"use strict";return new ce(e)}function pe(e,t){"use strict";if(!(e instanceof t))throw new Yn.TypeError("Cannot call a class as a function")}function he(e,t){"use strict";if(!e)throw new Yn.ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function de(){"use strict";void 0===Cr&&(a(),Cr={default:ce});var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yn.document.body,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];pe(this,de);var n=he(this,(de.__proto__||Yn.Object.getPrototypeOf(de)).call(this,t,Cr.default,[{name:"untitled"}]));if(n.rootEl=null,!(e instanceof Yn.window.Element))throw new Yn.Error("No root element provided.");return n.rootEl=e,n.each(function(e){return Ir.default.add(e)}),n}function ve(e,t){"use strict";void 0===Hr&&(Hr=null,o(),i(),s());var n=void 0;if("object"!==t.type){if(t.id&&(n=e.querySelector('[data-spirit-id="'+t.id+'"]'),!n&&!t.path))throw(0,Or.debug)()&&(Yn.console.group("Unable to resolve element by [data-spirit-id] attribute"),Yn.console.warn("Timeline: ",t),Yn.console.groupEnd()),new Yn.Error('Cannot find element with [data-spirit-id="'+t.id+'"]');if(!n&&t.path&&(e===Yn.document.body&&(e=void 0),n=Or.xpath.getElement(t.path,e),!n))throw(0,Or.debug)()&&(Yn.console.group("Unable to resolve element by path expression"),Yn.console.warn("Timeline: ",t),Yn.console.groupEnd()),new Yn.Error("Cannot find element with path expression "+t.path);if(!n)throw(0,Or.debug)()&&(Yn.console.group("Unable to resolve element"),Yn.console.warn("Timeline: ",t),Yn.console.groupEnd()),new Yn.Error("Cannot find element.")}return n}function me(e){"use strict";return"string"==typeof e.label&&e.label.trim().length>0?e.label:e.id?e.id:e.path?e.path:"undefined"}function ye(e){"use strict";void 0===Jr&&(Jr=null,o(),i(),s(),u());var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(!Or.context.isBrowser())throw new Yn.Error("Invalid context. spirit.create() can only be executed in browser.");t instanceof Yn.window.Element||(t=Yn.document.body||Yn.document.documentElement),!Yn.Array.isArray(e)&&e.groups&&Yn.Array.isArray(e.groups)&&(e=e.groups),Yn.Array.isArray(e)||(e=[e]);var n=new Gr.Groups(t,[]);return e.forEach(function(e){var r={name:e.name,timeScale:e.timeScale||1,timelines:[]};e.timelines.forEach(function(e){var n=ve(t,e);r.timelines.push({transformObject:n,props:e.props,label:me(e),path:Or.xpath.getExpression(n,t),id:e.id})});var i=new Gr.Group(r);n.add(i)}),n}function ge(e){"use strict";void 0===Zr&&(Zr=null,o(),i(),s());var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return Or.context.isBrowser()?(0,Or.jsonloader)(e).then(function(e){return ye(e,t)}):Yn.Promise.reject(new Yn.Error("Invalid context: spirit.load() can only be executed in browser."))}function be(){"use strict";void 0===In&&(In={default:Jn},kr={default:ie},xr={default:Tr},Br={create:ye,load:ge},Fn.value=!0,qn(Br,"__esModule",Fn)),this.config=In.default,this.version="2.0.1",this.setup=kr.default,this.groups=xr.default,this.create=Br.create,this.load=Br.load}function _e(){"use strict";void 0===$r&&($r=null,o(),i(),s(),void 0===sr&&(sr={default:I}));var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];m(this,_e),Or.is.isObject(e)&&(e=Or.convert.objectToArray(e));var t=y(this,(_e.__proto__||Yn.Object.getPrototypeOf(_e)).call(this,e,sr.default,["prop"]));return t.duplicates={prop:"name"},t.sortOn=function(e,t){return t.name<e.name},t.linkedList=!0,t._mappings=[],t}function we(){"use strict";void 0===Qr&&(Qr=null,o(),i(),s(),void 0===er&&(er={default:O}));var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];g(this,we),Or.is.isObject(e)&&(e=Or.convert.objectToArray(e));var t=b(this,(we.__proto__||Yn.Object.getPrototypeOf(we)).call(this,e,er.default,[0,0]));return t.duplicates={prop:"time"},t.sortOn="time",t.linkedList=!0,t._mappings=[],t}function Oe(){"use strict";return this._next}function Ee(){"use strict";return this._prev}function je(){"use strict";return/{(.*?)}/.test(this._value)}function ke(e,t,n){"use strict";return t in e?Yn.Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xe(){"use strict";var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=void 0;try{t=e?this._value:this.value}catch(e){t=this._value}return ke({},this.time+"s",{value:t,ease:this.ease})}function Pe(){"use strict";void 0===Wr&&(Wr=null,o(),i(),s()),Or.events.clearEvents(this,O.Events)}function Ae(e){"use strict";this._value=e}function Te(e){return void 0===ei&&(ei=null,o(),void 0===yr&&(yr={default:S})),t.call(this,"value",Ae,e)}function Le(e){return void 0===ti&&(ti=null,o(),void 0===yr&&(yr={default:S})),t.call(this,"ease",Fe,e)}function Se(e){return void 0===ni&&(ni=null,o(),void 0===yr&&(yr={default:S})),t.call(this,"time",Re,e)}function Me(e){return void 0===ri&&(ri=null,o(),void 0===yr&&(yr={default:S})),t.call(this,"keyframes",Mt,e)}function Ce(e){return void 0===ii&&(ii=null,o(),void 0===yr&&(yr={default:S})),t.call(this,"name",Ue,e)}function Ie(e){return void 0===oi&&(oi=null,o(),void 0===yr&&(yr={default:S})),t.call(this,"timelines",cn,e)}function Ne(e){return void 0===si&&(si=null,o(),void 0===yr&&(yr={default:S})),t.call(this,"timeScale",fn,e)}function Ge(e){return void 0===ai&&(ai=null,o(),void 0===yr&&(yr={default:S})),t.call(this,"duration",pn,e)}function Be(e){return void 0===ui&&(ui=null,o(),void 0===yr&&(yr={default:S})),t.call(this,"name",hn,e)}function De(){"use strict";return this._list}function Fe(e){return void 0===Fr&&(Fr=[]),n.call(this,Fr,"ease",e)}function Re(e){return void 0===Rr&&(Rr=[{validator:Ye,message:"Time must be a number"}]),n.call(this,Rr,"time",e)}function Ue(e){return void 0===Ur&&(Ur=[{validator:Ct,message:"Name must be a string"},{validator:It,message:"Name must be a string"}]),n.call(this,Ur,"name",e)}function Ye(e){"use strict";return"number"==typeof e}function qe(e){return"number"==typeof e}function Xe(e){if(!qe(e)||e<0||Yn.isNaN(e))throw Yn.TypeError("n must be a positive number");return this._maxListeners=e,this}function Ke(e){return"object"==typeof e&&null!==e}function Ve(e){return void 0===e}function ze(e){return"function"==typeof e}function He(e){var t,n,r,i,o,s;if(this._events||(this._events={}),"error"===e&&(!this._events.error||Ke(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Yn.Error)throw t;var a=new Yn.Error('Uncaught, unspecified "error" event. ('+t+")");throw a.context=t,a}if(n=this._events[e],Ve(n))return!1;if(ze(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:i=Yn.Array.prototype.slice.call(arguments,1),n.apply(this,i)}else if(Ke(n))for(i=Yn.Array.prototype.slice.call(arguments,1),s=n.slice(),r=s.length,o=0;o<r;o++)s[o].apply(this,i);return!0}function Je(e,t){var n;if(!ze(t))throw Yn.TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,ze(t.listener)?t.listener:t),this._events[e]?Ke(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,Ke(this._events[e])&&!this._events[e].warned&&(n=Ve(this._maxListeners)?E.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,Yn.console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof Yn.console.trace&&Yn.console.trace())),this}function Ze(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!ze(t))throw Yn.TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this}function $e(e,t){var n,r,i,o;if(!ze(t))throw Yn.TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],i=n.length,r=-1,n===t||ze(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(Ke(n)){for(o=i;o-- >0;)if(n[o]===t||n[o].listener&&n[o].listener===t){r=o;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this}function Qe(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],ze(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this}function We(e){var t;return t=this._events&&this._events[e]?ze(this._events[e])?[this._events[e]]:this._events[e].slice():[]}function et(e){if(this._events){var t=this._events[e];if(ze(t))return 1;if(t)return t.length}return 0}function tt(e){"use strict";if(void 0===li&&(li=null,o(),i(),s()),!Or.is.isObject(e))throw new Yn.Error("Object is invalid");var t=Yn.Object.keys(e);if(0===t.length||t.length>1)throw new Yn.Error("Object is invalid");var n=t[0],r=e[n],a=r.value,u=r.ease;if(Or.is.isObject(e[n])||"string"!=typeof e[n]&&"number"!=typeof e[n]||(a=e[n],u=null),n=Yn.parseFloat(n),Yn.isNaN(n))throw new Yn.Error("Object is invalid. Invalid time object { `1s`: ... }");if(void 0===a||null===a)throw new Yn.Error("Object is invalid. No value found: {value}");return new O(n,a,u)}function nt(e,t,n){"use strict";null===e&&(e=Yn.Function.prototype);var r=Yn.Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var i=Yn.Object.getPrototypeOf(e);return null===i?void 0:nt(i,t,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)}function rt(e){"use strict";if(Yn.Array.isArray(e)){for(var t=0,n=Yn.Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Yn.Array.from(e)}function it(e){"use strict";void 0===ci&&(ci=null,o(),i(),s(),void 0===er&&(er={default:O}));var t=this;Or.is.isObject(e)&&!(e instanceof er.default)&&Yn.Object.keys(e).length>1&&(e=Or.convert.objectToArray(e));var n=nt(we.prototype.__proto__||Yn.Object.getPrototypeOf(we.prototype),"add",this).call(this,e),r=function(e){e.mappings=[].concat(rt(t.mappings))};return Yn.Array.isArray(n)?n.forEach(r):r(n),n}function ot(e){"use strict";var t=nt(we.prototype.__proto__||Yn.Object.getPrototypeOf(we.prototype),"remove",this).call(this,e),n=function(e){e.mappings=[]};return Yn.Array.isArray(t)?t.forEach(n):n(t),t}function st(e){"use strict";var t=Yn.parseFloat(e);return this._list.find(function(e){return e.time===t})}function at(){"use strict";var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.list.reduce(function(t,n){return cr({},t,n.toObject(e))},{})}function ut(){"use strict";void 0===fi&&(fi=null,o(),i(),s()),this.each(function(e){return e.destroy()}),Or.events.clearEvents(this,we.Events)}function lt(e){"use strict";this._mappings=e,this.each(function(t){t.mappings=[].concat(rt(e))})}function ct(){"use strict";void 0===rr&&o();var e=this._duplicates,t=!1,n=!1;if("boolean"==typeof e&&e===!1&&(t=this.list.map(function(e){return{count:1,item:e}}).reduce(function(e,t){return e[t.item]=(e[t.item]||0)+t.count,e},{})),rr.isObject(e)&&e.hasOwnProperty("prop")&&(n=!0,t=this.list.map(function(t){return{count:1,prop:t[e.prop]}}).reduce(function(e,t){return e[t.prop]=(e[t.prop]||0)+t.count,e},{})),t&&Yn.Object.keys(t).filter(function(e){return t[e]>1}).length>0){var r=Yn.Object.keys(t).find(function(e){return t[e]>1}),i=!!n&&e.prop+": "+r,s=!!this._model&&this.constructor.name+" > "+this._model.name+" > { "+i+" }";throw new Yn.Error("List has duplicates. "+s)}}function ft(){"use strict";var e=this._sortOn;"boolean"==typeof e&&e===!0&&(this._list=this._list.sort()),"string"==typeof e&&(this._list=this._list.sort(function(t,n){return t[e]-n[e]})),"function"==typeof e&&(this._list=this._list.sort(e))}function pt(){"use strict";if(void 0===rr&&o(),this._linkedList)for(var e=0;e<this._list.length;e++){if(!rr.isObject(this._list[e]))throw new Yn.Error("Can not link primitives.");this._list[e]._prev=e>0?this._list[e-1]:null,this._list[e]._next=e<this._list.length-1?this._list[e+1]:null}}function ht(e){"use strict";if(e>=this._list.length)throw new Yn.Error("Index exceeded. Requested "+e+", have length of "+this.length);return this._list[e]}function dt(e){"use strict";void 0===rr&&o();var t=this,n=null,r=function(e){var r=void 0;if(t._model)if(e instanceof t._model)r=e,r._list=t,r.setupBubbleEvents&&"function"==typeof r.setupBubbleEvents&&r.setupBubbleEvents();else{if(!rr.isObject(e)||"function"!=typeof t._model.fromObject)throw new Yn.Error("Invalid item.");r=t._model.fromObject(e),r._list=t,r.setupBubbleEvents&&"function"==typeof r.setupBubbleEvents&&r.setupBubbleEvents()}else r=e;Yn.Array.isArray(n)?n.push(r):n=r,t._list.push(r),t.emit("add",r)};return Yn.Array.isArray(e)?(n=[],e.forEach(r)):r(e),this.checkOnDuplicates(),this.sort(),this.linkItems(),n}function vt(e){"use strict";void 0===rr&&o();var t=this,n=null,r=function(e){var r=function(e){var r=t._list.indexOf(e);r>-1&&(t._list.splice(r,1),e._list&&e._list instanceof S&&(e._list=null),rr.isObject(e)&&("_prev"in e&&delete e._prev,"_next"in e&&delete e._next),t.emit("remove",e),Yn.Array.isArray(n)?n.push(e):n=e)};t._model?e instanceof t._model&&r(e):r(e)};return Yn.Array.isArray(e)?(n=[],e.forEach(r)):r(e),this.sort(),this.linkItems(),n}function mt(){"use strict";this.each(this.remove.bind(this))}function yt(e){"use strict";for(var t=[].concat(P(this.list)),n=[],r=!1,i=0;i<t.length;i++){var o=t[i];try{n.push(e(o,i))}catch(e){r=e}if(r)break}if(r)throw r;return n}function gt(){"use strict";void 0===rr&&o();var e=this._model?this.list.map(function(e){return e.toObject()}):this.list;return e.reduce(function(e,t){if(rr.isObject(t)){var n=cr({},t);delete n._prev,delete n._next,delete n._list,e.push(n)}else e.push(t);return e},[])}function bt(e){"use strict";this._duplicates=e,this.checkOnDuplicates()}function _t(e){"use strict";this._sortOn=e,this.sort()}function wt(e){"use strict";this._linkedList=e,this.linkItems()}function Ot(e){"use strict";if(!Yn.Array.isArray(e))throw new Yn.Error("List should be an array");this._list=e,this._linkedList&&this.linkItems(),this.emit("change:list",e)}function Et(){"use strict";return this.list.length}function jt(){"use strict";
return this._next}function kt(){"use strict";return this._prev}function xt(){"use strict";void 0===pi&&(pi=null,o(),i(),s(),void 0===ir&&(ir={default:we}));var e=this;if(this._keyframes instanceof ir.default){Or.events.clearEvents(this._keyframes,ir.default.Events);var t=function(t,n){e._keyframes.on(t,Or.events.bubbleEvent(n,e))};t("change:list","change:keyframes:list"),t("change","change:keyframe"),t("change:time","change:keyframe:time"),t("change:value","change:keyframe:value"),t("change:ease","change:keyframe:ease"),t("add","add:keyframe"),t("remove","remove:keyframe")}}function Pt(e,t,n){"use strict";return t in e?Yn.Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function At(){"use strict";var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.keyframes?this.keyframes.toObject(e):{};return Pt({},this.name,t)}function Tt(){"use strict";return["x","y","z","rotation","rotationZ","rotationX","rotationY","skewX","skewY","scale","scaleX","scaleY"].includes(this.name)}function Lt(){"use strict";void 0===hi&&(hi=null,o(),i(),s()),this._keyframes&&this._keyframes.destroy(),Or.events.clearEvents(this,I.Events)}function St(){"use strict";return this._list}function Mt(e){"use strict";void 0===di&&(di=null,o(),i(),s(),void 0===ir&&(ir={default:we})),e instanceof ir.default||(e=new ir.default(e));var t=[];this._keyframes&&(t=this._keyframes.mappings,Or.events.clearEvents(this._keyframes,ir.default.Events),this._keyframes.clear()),this._keyframes=e,this._keyframes.mappings=t,this.setupBubbleEvents()}function Ct(e){"use strict";return"string"==typeof e}function It(e){"use strict";return!/^\d+\.?\d*?$/.test(e)}function Nt(e){"use strict";if(void 0===vi&&(vi=null,o(),i(),s()),!Or.is.isObject(e))throw new Yn.Error("Object is invalid");var t=Yn.Object.keys(e);if(0===t.length)throw new Yn.Error("Object is invalid");for(var n in e)if(!Or.is.isObject(e[n]))throw new Yn.Error("Object is invalid");var r=t[0];return new I(r,e[r])}function Gt(e){"use strict";return this._list.find(function(t){return t.name===e})}function Bt(e,t,n){"use strict";null===e&&(e=Yn.Function.prototype);var r=Yn.Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var i=Yn.Object.getPrototypeOf(e);return null===i?void 0:Bt(i,t,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)}function Dt(e){"use strict";if(Yn.Array.isArray(e)){for(var t=0,n=Yn.Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Yn.Array.from(e)}function Ft(e){"use strict";void 0===mi&&(mi=null,o(),i(),s(),void 0===sr&&(sr={default:I}));var t=this;Or.is.isObject(e)&&!(e instanceof sr.default)&&Yn.Object.keys(e).length>1&&(e=Or.convert.objectToArray(e));var n=Bt(_e.prototype.__proto__||Yn.Object.getPrototypeOf(_e.prototype),"add",this).call(this,e),r=function(e){e.keyframes.mappings=[].concat(Dt(t.mappings))};return Yn.Array.isArray(n)?n.forEach(r):r(n),n}function Rt(e){"use strict";var t=Bt(_e.prototype.__proto__||Yn.Object.getPrototypeOf(_e.prototype),"remove",this).call(this,e),n=function(e){e.keyframes.mappings=[]};return Yn.Array.isArray(t)?t.forEach(n):n(t),t}function Ut(e){"use strict";return!!this.get(e)}function Yt(){"use strict";var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.list.reduce(function(t,n){return cr({},t,n.toObject(e))},{})}function qt(){"use strict";void 0===yi&&(yi=null,o(),i(),s()),this.each(function(e){return e.destroy()}),Or.events.clearEvents(this,_e.Events)}function Xt(e){"use strict";this._mappings=e,this.each(function(t){t.keyframes.mappings=[].concat(Dt(e))})}function Kt(){"use strict";void 0===lr&&(o(),i(),s(),void 0===ur&&(ur={default:_e}),lr={default:B});var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dom",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new ur.default,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;if(N(this,Kt),this.type="dom",this.transformObject=null,this.label=null,this.path=null,this.id=null,this.props=null,n instanceof ur.default||(n=new ur.default(n)),Yn.Object.assign(this,{type:e,transformObject:t,props:n,label:u,path:r,id:a}),"dom"===e){if(!t||Or.context.isBrowser()&&!(t instanceof Yn.window.Element))throw new Yn.Error("transformObject needs to be an element.");if(!a&&!r)throw new Yn.Error("path is not defined")}if("object"===e&&!t)throw new Yn.Error("transformObject needs to be an object");this.props.mappings=[new lr.default(/this/g,t)]}function Vt(e){"use strict";if(void 0===gi&&(gi=null,o(),i(),s()),!Or.is.isObject(e))throw new Yn.Error("Object is invalid.");var t=Yn.Object.keys(e);if(!t.includes("transformObject"))throw new Yn.Error("Object is invalid");var n=Or.convert.objectToArray(e).filter(function(e){return void 0!==e});return n=cr({type:n.type||"dom",props:{}},Or.convert.arrayToObject(n)),new Kt(n.type,n.transformObject,n.props,n.path||void 0,n.id||void 0,n.label||void 0)}function zt(){"use strict";var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t={type:this.type,transformObject:this.transformObject,props:this.props.toObject(e),label:this.label,path:this.path,id:this.id};return Yn.Object.keys(t).forEach(function(e){t[e]||delete t[e]}),t}function Ht(){"use strict";void 0===ur&&(ur={default:_e}),this.props instanceof ur.default&&this.props.each(function(e){return e.destroy()})}function Jt(e,t){"use strict";if(!(e instanceof t))throw new Yn.TypeError("Cannot call a class as a function")}function Zt(e,t){"use strict";if(!e)throw new Yn.ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function $t(){"use strict";return Jt(this,$t),Zt(this,($t.__proto__||Yn.Object.getPrototypeOf($t)).call(this,[]))}function Qt(e,t,n){"use strict";null===e&&(e=Yn.Function.prototype);var r=Yn.Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var i=Yn.Object.getPrototypeOf(e);return null===i?void 0:Qt(i,t,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)}function Wt(e){"use strict";if(void 0===bi&&(bi=null,o(),i(),s(),u()),!(e instanceof Gr.Group))throw new Yn.Error("Invalid group. Only Group instances allowed.");this.groupNames().includes(e.name)?(0,Or.debug)()&&Yn.console.warn('registry.add() Group "'+e.name+'" already exist in registry. Skip registry (spirit.groups)'):((0,Or.debug)()&&Yn.console.warn('registry.add() Group "'+e.name+'" added to registry (spirit.groups) and can be resolved by Spirit app'),Qt($t.prototype.__proto__||Yn.Object.getPrototypeOf($t.prototype),"add",this).call(this,e))}function en(e){"use strict";return this.list.find(function(t){return t.name===e})}function tn(){"use strict";return this.list.map(function(e){return e.name})}function nn(e){"use strict";return this._list.find(function(t){return t.transformObject===e})}function rn(){"use strict";var e=this.name,t=this.timeScale,n=this.timelines.toArray();return{name:e,timeScale:t,timelines:n}}function on(){"use strict";void 0===_i&&(_i=null,o(),i(),s()),this.timeline&&Or.gsap.killTimeline(this.timeline)}function sn(e,t){"use strict";if(!(e instanceof t))throw new Yn.TypeError("Cannot call a class as a function")}function an(e,t){"use strict";if(!e)throw new Yn.ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function un(e,t){"use strict";var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;sn(this,un);var r=an(this,(un.__proto__||Yn.Object.getPrototypeOf(un)).call(this,e));return r.transformObject=null,n?r.stack=n:Yn.Error.captureStackTrace(r,un),r.transformObject=t,r.name="TimelineError",r.message=e,r}function ln(){"use strict";void 0===Kr&&(o(),i(),s(),void 0===Yr&&(Yr={default:Jn}),Kr={TimelineError:un},Fn.value=!0,qn(Kr,"__esModule",Fn));var e=this;try{if(!Yr.default.gsap.timeline||!Yr.default.gsap.tween)throw(0,Or.debug)()&&Yn.console.warn("\n            Trying to construct group "+this.name+", but GSAP cannot be found.\n            \n            Did you forgot to call spirit.setup() perhaps?\n            \n            @usage\n                \n                spirit.setup().then(function(){\n                  // gsap is loaded here..\n                })\n                \n            or provide gsap instances manually:\n            \n                spirit.setup({ \n                  tween:    TweenLite,\n                  timeline: TimelineLite\n                }).then(function(){\n                  // gsap is loaded here..\n                })\n                \n          "),new Yn.Error("GSAP cannot be found");this.timeline&&this.timeline instanceof Yr.default.gsap.timeline?Or.gsap.killTimeline(this.timeline):this.timeline=new Yr.default.gsap.timeline({paused:!0}),this.timelines.each(function(t){if("dom"===t.type){var n=t.transformObject;if(!(n instanceof Yn.window.Element))throw new Kr.TimelineError("transformObject is not an Element",n);try{e.timeline.add(Or.gsap.generateTimeline(t).play(),0,"start")}catch(e){throw new Kr.TimelineError(e.message,n,e.stack)}}}),this.timeline.timeScale(this.timeScale),this._duration=this.timeline.duration()}catch(e){throw e.message="Could not construct timeline: "+e.message,e}return this.emit("construct",this.timeline),this.timeline}function cn(e){"use strict";void 0===Sr&&(Sr={default:le}),e instanceof Sr.default||(e=new Sr.default(Yn.Array.from(e))),this._timelines=e}function fn(e){"use strict";if(void 0===Yr&&(Yr={default:Jn}),"number"!=typeof e||!Yn.isFinite(e))throw new Yn.Error("timeScale needs to be a number");this.timeline&&this.timeline instanceof Yr.default.gsap.timeline&&this.timeline.timeScale(e),this._timeScale=e}function pn(e){"use strict";void 0===Yr&&(Yr={default:Jn}),this.timeline&&this.timeline instanceof Yr.default.gsap.timeline&&(this.timeline.duration(e),this.timeScale=this.timeline.timeScale(),this._duration=this.timeline.duration())}function hn(e){"use strict";if("string"!=typeof e)throw new Yn.Error("Name needs to be a string");this._name=e}function dn(e,t,n){"use strict";null===e&&(e=Yn.Function.prototype);var r=Yn.Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var i=Yn.Object.getPrototypeOf(e);return null===i?void 0:dn(i,t,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)}function vn(e){"use strict";void 0===Ir&&a();var t=dn(de.prototype.__proto__||Yn.Object.getPrototypeOf(de.prototype),"add",this).call(this,e);return Yn.Array.isArray(t)?t.forEach(function(e){return Ir.default.add(e)}):Ir.default.add(t),t}function mn(e){"use strict";void 0===Ir&&a();var t=dn(de.prototype.__proto__||Yn.Object.getPrototypeOf(de.prototype),"remove",this).call(this,e);return Yn.Array.isArray(t)?t.forEach(function(e){return Ir.default.remove(e)}):Ir.default.remove(t),t}function yn(){"use strict";if(void 0===Vr&&(o(),i(),s(),Vr={default:Jn}),!Vr.default.gsap.timeline||!Vr.default.gsap.tween)throw(0,Or.debug)()&&Yn.console.warn("\n            Trying to construct groups, but GSAP cannot be found.\n            \n            Did you forgot to call spirit.setup() ?\n            \n            spirit.setup() usage:\n            \n                // auto inject gsap from cdn:\n                spirit.setup()\n                \n                // or provide gsap instances manually:\n                spirit.setup({\n                  tween:    TweenMax,\n                  timeline: TimelineMax\n                })\n          "),new Yn.Error("GSAP cannot be found");return this.list.map(function(e){return e.construct()})}function gn(e){"use strict";return this.list.find(function(t){return t.name===e})}function bn(){"use strict";return this._name}function _n(){"use strict";return this.timeline?this.timeline.duration():0}function wn(){"use strict";return this._timeScale}function On(){"use strict";return this._timelines}function En(){"use strict";return this._mappings}function jn(){return r.call(this,"name")}function kn(){return r.call(this,"time")}function xn(){return r.call(this,"ease")}function Pn(){"use strict";return this._keyframes}function An(){"use strict";return this._list}function Tn(){"use strict";return this._linkedList}function Ln(){"use strict";return this._sortOn}function Sn(){"use strict";return this._duplicates}function Mn(){"use strict";return this._mappings}function Cn(){"use strict";var e=this;if(this.isEval()){var t=this.mappings.reduce(function(t,n){return n.regex.global&&(n.regex.lastIndex=0),n.regex.test(e._value)&&(t[n.regex]=n),t},{}),n=this._value;for(var r in t)n=n.replace(t[r].regex,"mappings["+r+"].map");var i=void 0;try{i=Yn.eval(n)}catch(e){if(this.mappings.length>0)throw e}return i}return this._value}var In,Nn,Gn,Bn,Dn={enumerable:!1,configurable:!0,writable:!1},Fn={enumerable:!1,configurable:!1,writable:!1},Rn={enumerable:!1,configurable:!0,writable:!0},Un={enumerable:!1,configurable:!0},Yn=this,qn=Object.defineProperty,Xn=Object.setPrototypeOf,Kn=c.prototype,Vn=E.prototype,zn=be.prototype,Hn=Kt.prototype,Jn=(e.prototype=Kn,new e),Zn=this;Dn.value="debug",qn(h,"name",Dn);var $n;Dn.value="loadScript",qn(d,"name",Dn);var Qn;Dn.value="EventEmitter",qn(E,"name",Dn),E.EventEmitter=E,E.defaultMaxListeners=10,E.listenerCount=j;var Wn=(e.prototype=Vn,new e);O.prototype=Wn,Dn.value="Keyframe",qn(O,"name",Dn),O.fromObject=tt,O.Events=["change","change:time","change:value","change:ease"],Xn(O,E);var er,tr=(e.prototype=Vn,new e),nr=(e.prototype=tr,new e);we.prototype=nr,Dn.value="Keyframes",qn(we,"name",Dn),we.Events=["change:list","add","remove","change","change:time","change:value","change:ease"];var rr;S.prototype=tr,Dn.value="List",qn(S,"name",Dn),S.Events=["change:list","add","remove"],Xn(S,E),Xn(we,S);var ir,or=(e.prototype=Vn,new e);I.prototype=or,Dn.value="Prop",qn(I,"name",Dn),I.fromObject=Nt,I.Events=["change","change:name","change:keyframes","change:keyframes:list","change:keyframe","change:keyframe:time","change:keyframe:value","change:keyframe:ease","add:keyframe","remove:keyframe"],Xn(I,E);var sr,ar=(e.prototype=tr,new e);_e.prototype=ar,Dn.value="Props",qn(_e,"name",Dn),_e.Events=["change:list","add","remove","change","change:name","change:keyframes","change:keyframes:list","change:keyframe","change:keyframe:time","change:keyframe:value","change:keyframe:ease","add:keyframe","remove:keyframe"],Xn(_e,S);var ur;Dn.value="EvalMap",qn(B,"name",Dn);var lr;Dn.value="Timeline",qn(Kt,"name",Dn);var cr=Object.assign;Kt.fromObject=Vt;var fr,pr,hr,dr,vr,mr,yr,gr,br,_r,wr,Or,Er,jr;Dn.value="setup",qn(ie,"name",Dn);var kr,xr,Pr,Ar=(e.prototype=tr,new e),Tr=(e.prototype=Ar,new e),Lr=(e.prototype=tr,new e);le.prototype=Lr,Dn.value="Timelines",qn(le,"name",Dn),Xn(le,S);var Sr,Mr=(e.prototype=Vn,new e);ce.prototype=Mr,Dn.value="Group",qn(ce,"name",Dn),ce.fromObject=fe,Xn(ce,E);var Cr,Ir,Nr=(e.prototype=tr,new e);de.prototype=Nr,Dn.value="Groups",qn(de,"name",Dn),Xn(de,S);var Gr,Br,Dr=(e.prototype=zn,new e);if(Dr.config=Jn,Dr.version="2.0.1",Dr.setup=ie,Dr.groups=Tr,Dr.create=ye,Dr.load=ge,Dr.__proto__!==zn)throw new Error("unexpected prototype");if(Jn.debug=!0,Jn.__proto__!==Kn)throw new Error("unexpected prototype");Rn.value=O,qn(Wn,"constructor",Rn),Dn.value="set",qn(Ae,"name",Dn),Un.set=void 0,Rn.value=null,qn(Wn,"_ease",Rn);var Fr;Dn.value="set",qn(Fe,"name",Dn),Rn.value=null,qn(Wn,"_time",Rn);var Rr;if(Dn.value="set",qn(Re,"name",Dn),Wn.__proto__!==Vn)throw new Error("unexpected prototype");if(Vn._events=void 0,Vn._maxListeners=void 0,Vn.on=Je,Rn.value=we,qn(nr,"constructor",Rn),Dn.value="get",qn(nt,"name",Dn),nr.__proto__!==tr)throw new Error("unexpected prototype");if(Rn.value=S,qn(tr,"constructor",Rn),Un.set=void 0,tr.__proto__!==Vn)throw new Error("unexpected prototype");Rn.value=I,qn(or,"constructor",Rn),Un.set=void 0,Dn.value="set",qn(Mt,"name",Dn),Rn.value=null,qn(or,"_name",Rn);var Ur;if(Dn.value="set",qn(Ue,"name",Dn),or.__proto__!==Vn)throw new Error("unexpected prototype");if(Rn.value=_e,qn(ar,"constructor",Rn),Dn.value="get",qn(Bt,"name",Dn),ar.__proto__!==tr)throw new Error("unexpected prototype");if(Tr._maxListeners=1/0,Tr._model=null,Tr._duplicates=!0,Tr._sortOn=!1,Tr._linkedList=!1,Tr.__proto__!==Ar)throw new Error("unexpected prototype");if($t.prototype=Ar,Xn($t,S),Dn.value="get",qn(Qt,"name",Dn),Ar.__proto__!==tr)throw new Error("unexpected prototype");if(Rn.value=le,qn(Lr,"constructor",Rn),Lr.__proto__!==tr)throw new Error("unexpected prototype");Rn.value=ce,qn(Mr,"constructor",Rn);var Yr,qr=Error.prototype,Xr=(e.prototype=qr,new e);un.prototype=Xr,Xn(un,Error);var Kr;if(Dn.value="set",qn(cn,"name",Dn),Dn.value="set",qn(fn,"name",Dn),Dn.value="set",qn(pn,"name",Dn),Dn.value="set",qn(hn,"name",Dn),Mr.__proto__!==Vn)throw new Error("unexpected prototype");Rn.value=de,qn(Nr,"constructor",Rn),Dn.value="get",qn(dn,"name",Dn);var Vr;if(Nr.__proto__!==tr)throw new Error("unexpected prototype");if(Rn.value=un,qn(Xr,"constructor",Rn),Xr.__proto__!==qr)throw new Error("unexpected prototype");Rn.value=gn,qn(Nr,"get",Rn),Rn.value=yn,qn(Nr,"construct",Rn),Rn.value=mn,qn(Nr,"remove",Rn),Rn.value=vn,qn(Nr,"add",Rn),Un.set=Be,Un.get=bn,qn(Mr,"name",Un),Un.set=Ge,Un.get=_n,qn(Mr,"duration",Un),Un.set=Ne,Un.get=wn,qn(Mr,"timeScale",Un),Un.set=Ie,Un.get=On,qn(Mr,"timelines",Un),Rn.value=ln,qn(Mr,"construct",Rn),Rn.value=on,qn(Mr,"reset",Rn),Rn.value=rn,qn(Mr,"toObject",Rn),Rn.value=nn,qn(Lr,"get",Rn),Rn.value=tn,qn(Ar,"groupNames",Rn),Rn.value=en,qn(Ar,"get",Rn),Rn.value=Wt,qn(Ar,"add",Rn),Rn.value=$t,qn(Ar,"constructor",Rn),Tr._list=[],Tr._events={},Rn.value=Ht,qn(Hn,"destroy",Rn),Rn.value=zt,qn(Hn,"toObject",Rn),Un.set=Xt,Un.get=En,qn(ar,"mappings",Un),Rn.value=qt,qn(ar,"destroy",Rn),Rn.value=Yt,qn(ar,"toObject",Rn),Rn.value=Ut,qn(ar,"haveProp",Rn),Rn.value=Rt,qn(ar,"remove",Rn),Rn.value=Ft,qn(ar,"add",Rn),Rn.value=Gt,qn(ar,"get",Rn),Un.set=Ce,Un.get=jn,qn(or,"name",Un),Un.set=Me,Un.get=Pn,qn(or,"keyframes",Un),Un.get=St,qn(or,"list",Un),Rn.value=Lt,qn(or,"destroy",Rn),Rn.value=Tt,qn(or,"isCSSTransform",Rn),Rn.value=At,qn(or,"toObject",Rn),Rn.value=xt,qn(or,"setupBubbleEvents",Rn),Rn.value=kt,qn(or,"prev",Rn),Rn.value=jt,qn(or,"next",Rn),Un.get=Et,qn(tr,"length",Un),Un.set=Ot,Un.get=An,qn(tr,"list",Un),Un.set=wt,Un.get=Tn,qn(tr,"linkedList",Un),Un.set=_t,Un.get=Ln,qn(tr,"sortOn",Un),Un.set=bt,Un.get=Sn,qn(tr,"duplicates",Un),Rn.value=gt,qn(tr,"toArray",Rn),Rn.value=yt,qn(tr,"each",Rn),Rn.value=mt,qn(tr,"clear",Rn),Rn.value=vt,qn(tr,"remove",Rn),Rn.value=dt,qn(tr,"add",Rn),Rn.value=ht,qn(tr,"at",Rn),Rn.value=pt,qn(tr,"linkItems",Rn),Rn.value=ft,qn(tr,"sort",Rn),Rn.value=ct,qn(tr,"checkOnDuplicates",Rn),Un.set=lt,Un.get=Mn,qn(nr,"mappings",Un),Rn.value=ut,qn(nr,"destroy",Rn),Rn.value=at,qn(nr,"toObject",Rn),Rn.value=st,qn(nr,"get",Rn),Rn.value=ot,qn(nr,"remove",Rn),Rn.value=it,qn(nr,"add",Rn),Vn.listenerCount=et,Vn.listeners=We,Vn.removeAllListeners=Qe,Vn.removeListener=$e,Vn.once=Ze,Vn.addListener=Je,Vn.emit=He,Vn.setMaxListeners=Xe,Un.set=Se,Un.get=kn,qn(Wn,"time",Un),Un.set=Le,Un.get=xn,qn(Wn,"ease",Un),Un.get=De,qn(Wn,"list",Un),Un.set=Te,Un.get=Cn,qn(Wn,"value",Un),Rn.value=Pe,qn(Wn,"destroy",Rn),Rn.value=xe,qn(Wn,"toObject",Rn),Rn.value=je,qn(Wn,"isEval",Rn),Rn.value=Ee,qn(Wn,"prev",Rn),Rn.value=Oe,qn(Wn,"next",Rn),Jn.gsap={tween:null,timeline:null,autoInject:!0,autoInjectUrl:"https://unpkg.com/gsap/src/minified/TweenMax.min.js"},spirit=Dr;var zr,Hr,Jr,Zr,$r,Qr,Wr,ei,ti,ni,ri,ii,oi,si,ai,ui,li,ci,fi,pi,hi,di,vi,mi,yi,gi,bi,_i}).call(this);