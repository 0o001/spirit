/*!
 * Spirit.js v2.0.3
 * (c) 2017 Patrick Brouwer
 * Released under the MIT License.
 */
(function(){function e(){}function t(e,t,n){var r=this,i=function(t){return(0,ir.isFunction)(r.toObject)?r.toObject():$({},e,void 0!==t?t:n)},o=this["_"+e];o&&"function"==typeof o.toArray?o=o.toArray():o&&"function"==typeof o.toObject&&(o=o.toObject());var s=void 0;if(o!==n&&(s=i(o)),t.call(this,n),this._list instanceof gr.default&&this._list._duplicates!==!0)try{this._list.checkOnDuplicates()}catch(e){throw t.call(this,o),e}if(o!==n){var a=o&&(0,ir.isFunction)(o.toObject)?o.toObject():o,u=n&&(0,ir.isFunction)(n.toObject)?n.toObject():n,l={type:e,from:a,to:u},c=void 0;try{c=i()}catch(t){c=$({},e,n)}var f={previous:s,current:c,changed:l},p=["change",f],h=["change:"+e,f,n];if(this.emit.apply(this,p),this.emit.apply(this,h),this._list&&this._list instanceof j.EventEmitter){var d,v;(d=this._list).emit.apply(d,p),(v=this._list).emit.apply(v,h)}}}function n(e,t,n){var r=e.reduce(function(e,t){return t.validator(n)||e.push(t.message),e},[]);if(r.length>0)throw new qn.Error(""+r[0]);this["_"+t]=n}function r(e){return this["_"+e]}function i(){void 0===Gn&&(Gn={isBrowser:f},Rn.value=!0,Xn(Gn,"__esModule",Rn))}function o(){void 0===ir&&(ir={isObject:T,isSVG:L,isFunction:S},Rn.value=!0,Xn(ir,"__esModule",Rn))}function s(){void 0===Er&&(hr={has:p,ensure:v,transformOrigins:m,generateTimeline:R,killTimeline:U},vr={bubbleEvent:Y,createEventObjectForModel:X,clearEvents:K},mr={objectToArray:z,arrayToObject:H},yr={getExpression:J,getElement:Z},br={emitChange:W},Er={context:Gn,gsap:hr,events:vr,convert:mr,xpath:yr,is:ir,emitter:br,loadscript:d,jsonloader:ee,autobind:ie,debug:h},Rn.value=!0,Xn(hr,"__esModule",Rn),Rn.value=!0,Xn(vr,"__esModule",Rn),Rn.value=!0,Xn(mr,"__esModule",Rn),Rn.value=!0,Xn(yr,"__esModule",Rn),Rn.value=!0,Xn(br,"__esModule",Rn),Rn.value=!0,Xn(Er,"__esModule",Rn))}function a(){void 0===Nr&&(Nr={default:Lr},Rn.value=!0,Xn(Nr,"__esModule",Rn))}function u(){void 0===Br&&(Br={EvalMap:D,Group:fe,Groups:ve,Keyframe:E,Keyframes:Oe,Prop:N,Props:we,Timeline:Vt,Timelines:ce},Rn.value=!0,Xn(Br,"__esModule",Rn))}function l(e,t){"use strict";if(!(e instanceof t))throw new qn.TypeError("Cannot call a class as a function")}function c(){"use strict";l(this,c),this.debug=!0,this.gsap={tween:null,timeline:null,autoInject:!0,autoInjectUrl:"https://unpkg.com/gsap/src/minified/TweenMax.min.js"}}function f(){"use strict";return"window"in $n&&"document"in $n}function p(){"use strict";return void 0===Bn&&(Bn={default:Zn}),!(!Bn.default.gsap.tween||!Bn.default.gsap.timeline)}function h(){"use strict";return void 0===Dn&&(i(),Dn={default:Zn}),!1}function d(e){"use strict";return void 0===Gn&&i(),(0,Gn.isBrowser)()?new qn.Promise(function(t,n){var r=qn.document.createElement("script");r.src=e,r.async=!0,r.onload=function(){qn.document.body.removeChild(r),t()},r.onerror=function(){qn.document.body.removeChild(r),n(new qn.Error("Could not load script "+e))},qn.document.body.appendChild(r)}):qn.Promise.reject(new qn.Error("Script can only be loaded in browser: "+e))}function v(){"use strict";return void 0===Qn&&(void 0===Bn&&(Bn={default:Zn}),Qn={default:h},Wn={default:d}),p()?qn.Promise.resolve():Bn.default.gsap.autoInject?((0,Qn.default)()&&qn.console.warn("\n      \n      GSAP is being fetched from CDN: "+Bn.default.gsap.autoInjectUrl+".\n      If you already have GSAP installed, please provide it to Spirit:\n      \n        spirit.setup({\n          tween: TweenMax,\n          timeline: TimelineMax\n        })\n      \n      You want to use another cdn? Change it here:\n       \n        spirit.config.gsap.autoInjectUrl = 'https://cdn.xxx'\n      \n    "),(0,Wn.default)(Bn.default.gsap.autoInjectUrl).then(function(){return Bn.default.gsap.tween=qn.window.TweenMax,Bn.default.gsap.timeline=qn.window.TimelineMax,qn.Promise.resolve()})):((0,Qn.default)()&&qn.console.warn('\n      \n        It seems that you have disabled autoInject. GSAP can not be found by Spirit.\n        Please make sure you provide the tween and timeline to Spirit.\n      \n        For example:\n        \n        spirit.setup({\n          tween: TweenMax,\n          timeline: TimelineMax\n        })\n        \n        Or enable the autoInject "spirit.config.gsap.autoInject = true".\n        \n      '),qn.Promise.reject(new qn.Error("GSAP not found.")))}function m(e){"use strict";var t=e.props.get("transformOrigin"),n=t&&t.keyframes.list.map(function(e){return{time:e.time,value:e.value}})||[];(n.length>0&&0!==n[0].time||0===n.length)&&n.unshift({time:0,value:"50% 50%"});var r=n.shift(),i=void 0,o=void 0;return o=function(){return{current:r,next:i}},i=function(){return r=n&&n.length>0&&n.shift()||null,o()},o()}function y(e,t){"use strict";if(!(e instanceof t))throw new qn.TypeError("Cannot call a class as a function")}function g(e,t){"use strict";if(!e)throw new qn.ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function b(e,t){"use strict";if(!(e instanceof t))throw new qn.TypeError("Cannot call a class as a function")}function _(e,t){"use strict";if(!e)throw new qn.ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function w(e,t){"use strict";if(!(e instanceof t))throw new qn.TypeError("Cannot call a class as a function")}function O(e,t){"use strict";if(!e)throw new qn.ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function E(e,t){"use strict";var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;w(this,E);var r=O(this,(E.__proto__||qn.Object.getPrototypeOf(E)).call(this));return r._list=null,r._value=null,r.mappings=[],r.setMaxListeners(qn.Infinity),n=n||null,qn.Object.assign(r,{time:e,value:t,ease:n}),r}function j(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function k(e,t){return e.listenerCount(t)}function x(e,t){"use strict";if(!(e instanceof t))throw new qn.TypeError("Cannot call a class as a function")}function P(e,t){"use strict";if(!e)throw new qn.ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function A(e){"use strict";if(qn.Array.isArray(e)){for(var t=0,n=qn.Array(e.length);t<e.length;t++)n[t]=e[t];return n}return qn.Array.from(e)}function T(e){"use strict";return"[object Object]"===qn.Object.prototype.toString.call(e)}function L(e){"use strict";return e instanceof qn.window.SVGElement}function S(e){"use strict";return"function"==typeof e}function C(){"use strict";void 0===ir&&o();var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;x(this,C);var r=P(this,(C.__proto__||qn.Object.getPrototypeOf(C)).call(this));if(r._list=[],r._model=null,r._duplicates=!0,r._sortOn=!1,r._linkedList=!1,r.setMaxListeners(qn.Infinity),r._model=t,t){var i=void 0!==n?new(qn.Function.prototype.bind.apply(t,[null].concat(A(n)))):new t;if("function"!=typeof i.toObject)throw new qn.Error("Invalid Model prototype. model.toObject does not exist.")}if(!qn.Array.isArray(e))throw new qn.Error("Items should be an array");return r._list=e.reduce(function(e,n){if(r._model)if(n instanceof r._model)n._list=r,n.setupBubbleEvents&&"function"==typeof n.setupBubbleEvents&&n.setupBubbleEvents(),e.push(n);else{if(!ir.isObject(n)||"function"!=typeof t.fromObject)throw new qn.Error("Could not parse item from model");var i=t.fromObject(n);i._list=r,i.setupBubbleEvents&&"function"==typeof i.setupBubbleEvents&&i.setupBubbleEvents(),e.push(i)}else e.push(n);return e},[]),r}function M(e,t){"use strict";if(!(e instanceof t))throw new qn.TypeError("Cannot call a class as a function")}function I(e,t){"use strict";if(!e)throw new qn.ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function N(e){"use strict";void 0===or&&(or={default:Oe});var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new or.default;M(this,N);var n=I(this,(N.__proto__||qn.Object.getPrototypeOf(N)).call(this));return n._keyframes=null,n._list=null,n.setMaxListeners(qn.Infinity),t instanceof or.default||(t=new or.default(t)),e=e||null,qn.Object.assign(n,{name:e,keyframes:t}),n}function G(e,t){"use strict";if(!(e instanceof t))throw new qn.TypeError("Cannot call a class as a function")}function B(e,t){"use strict";if(!(e instanceof t))throw new qn.TypeError("Cannot call a class as a function")}function D(e,t){"use strict";if(B(this,D),!e||e&&!(e instanceof qn.RegExp))throw new qn.Error("Invalid expression.");if(null===t||void 0===t)throw new qn.Error("Invalid mapping.");qn.Object.assign(this,{regex:e,map:t})}function F(e,t,n){"use strict";return t in e?qn.Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R(e){"use strict";if(void 0===pr&&(void 0===Bn&&(Bn={default:Zn}),pr={default:Vt}),!(e&&e instanceof pr.default))throw new qn.Error("Need valid timeline data to generate GSAP timeline from");if(!Bn.default.gsap.timeline)throw new qn.Error("GSAP not set. Please make sure GSAP is available.");if("dom"!==e.type)throw new qn.Error("Timeline invalid. Needs a timeline with type of dom.");var t=new Bn.default.gsap.timeline({paused:!0}),n=m(e),r=n.current;return e.props.each(function(i){if(0!==i.keyframes.length&&"transformOrigin"!==i.name&&"svgOrigin"!==i.name)for(var o=i.keyframes.at(0);o;){var s=o,a=s.value,u=s.ease,l=s.time,c=o.prev(),f=c?c.time:0,p=c?l-c.time:l,h={ease:u||"Linear.easeNone"},d=F({},i.name,a);if(/\./.test(i.name)){for(var v=i.name.split("."),m=v.pop(),y={},g=y;v.length>0;){var b=v.shift();y[b]={},y=y[b]}y[m]=a,d=g}h=fr({},h,d),0===l&&(h.immediateRender=!0),i.isCSSTransform()&&r&&l>=r.time&&(h.transformOrigin=r.value,r=n.next().current),t.to(e.transformObject,p,h,f),o=o.next()}}),t}function U(e){"use strict";if(void 0===Bn&&(Bn={default:Zn}),e&&e instanceof Bn.default.gsap.timeline){e.eventCallback("onComplete",null),e.eventCallback("onUpdate",null),e.eventCallback("onStart",null);var t=e.getChildren();e.kill();for(var n=0;n<t.length;n++)t[n]&&t[n]instanceof Bn.default.gsap.timeline?U(t[n]):null!==t[n].target&&Bn.default.gsap.tween.set(t[n].target,{clearProps:"all"});e.clear()}}function Y(e,t){"use strict";if(void 0===dr&&(dr={default:C}),!(t instanceof j.EventEmitter))throw new qn.Error("Scope needs to be an event emitter.");return function(){if(this.emit.apply(this,[e].concat(qn.Array.prototype.slice.call(arguments))),this._list instanceof dr.default){var t;(t=this._list).emit.apply(t,[e].concat(qn.Array.prototype.slice.call(arguments)))}}.bind(t)}function q(e,t,n){"use strict";return t in e?qn.Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function X(e,t,n,r,i){"use strict";var o={prevModel:e.fromObject(t),model:e.fromObject(fr({},t,q({},n,i))),changed:{type:n,from:r,to:i}};return o}function K(e){"use strict";var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e.eventNames&&"function"==typeof e.eventNames?e.eventNames().forEach(function(t){return e.removeAllListeners(t)}):t.forEach(function(t){return e.removeAllListeners(t)})}function V(e,t,n){"use strict";return t in e?qn.Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function z(e){"use strict";return qn.Object.keys(e).reduce(function(t,n){return t.push(V({},n,e[n])),t},[])}function H(e){"use strict";return e.reduce(function(e,t){return e=fr({},e,t)},{})}function J(e){"use strict";void 0===ir&&o();for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=[],r=function(){return!t||t!==e};e.nodeType===qn.window.Node.ELEMENT_NODE&&r();){for(var i=0,s=e.previousSibling;s;s=s.previousSibling)s.nodeType!==qn.window.Node.DOCUMENT_TYPE_NODE&&s.nodeName===e.nodeName&&++i;var a=e.nodeName.toLowerCase(),u="["+(i+1)+"]";(0,ir.isSVG)(e)&&(a="*[local-name()='"+a+"']"),n.unshift(a+u),e=e.parentNode}return 0===n.length?null:t?n.join("/"):"/"+n.join("/")}function Z(e){"use strict";var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t||(t=qn.document.body);var n=qn.document.evaluate(e,t,null,qn.window.XPathResult.ANY_TYPE,null);return n.iterateNext()}function $(e,t,n){"use strict";return t in e?qn.Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Q(e,t,n){"use strict";void 0===Hr&&(Hr=null,o(),void 0===gr&&(gr={default:C}));var r=n.set;if(!j.EventEmitter.prototype.isPrototypeOf(e)&&!j.EventEmitter.prototype.isPrototypeOf(e.prototype))throw new qn.Error("@emitter.emitChange can only be applied to event emitters");return fr({},n,{configurable:!0,set:function(e){var n=this,i=function(r){return(0,ir.isFunction)(n.toObject)?n.toObject():$({},t,void 0!==r?r:e)},o=this["_"+t];o&&"function"==typeof o.toArray?o=o.toArray():o&&"function"==typeof o.toObject&&(o=o.toObject());var s=void 0;if(o!==e&&(s=i(o)),r.call(this,e),this._list instanceof gr.default&&this._list._duplicates!==!0)try{this._list.checkOnDuplicates()}catch(e){throw r.call(this,o),e}if(o!==e){var a=o&&(0,ir.isFunction)(o.toObject)?o.toObject():o,u=e&&(0,ir.isFunction)(e.toObject)?e.toObject():e,l={type:t,from:a,to:u},c=void 0;try{c=i()}catch(n){c=$({},t,e)}var f={previous:s,current:c,changed:l},p=["change",f],h=["change:"+t,f,e];if(this.emit.apply(this,p),this.emit.apply(this,h),this._list&&this._list instanceof j.EventEmitter){var d,v;(d=this._list).emit.apply(d,p),(v=this._list).emit.apply(v,h)}}}})}function W(e){"use strict";var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return e?function(r){var i;qn.Object.defineProperties(r.prototype,(i={},$(i,"_"+e,{value:t,writable:!0,enumerable:!1,configurable:!0}),$(i,e,{configurable:!0,get:function(){return this["_"+e]},set:function(t){var r=n.reduce(function(e,n){return n.validator(t)||e.push(n.message),e},[]);if(r.length>0)throw new qn.Error(""+r[0]);this["_"+e]=t}}),i));var o=qn.Object.getOwnPropertyDescriptor(r.prototype,e);qn.Object.defineProperty(r.prototype,e,Q(r,e,o))}:Q}function ee(e){"use strict";if(void 0===_r&&(i(),_r={},wr={}),!(0,Gn.isBrowser)())return qn.Promise.reject(new qn.Error("Invalid context. jsonLoader can only be used in browser."));if(e in _r)return qn.Promise.resolve(_r[e]);if(e in wr)return wr[e];var t=new qn.Promise(function(t,n){var r=new XMLHttpRequest;r.onreadystatechange=function(){if(4===this.readyState&&200===this.status)try{var r=qn.JSON.parse(this.responseText);_r[e]=r,t(r),delete wr[e]}catch(t){n(new qn.Error("jsonLoader: Invalid json for request "+e))}};try{r.open("GET",qn.encodeURI(e),!0),r.send()}catch(t){n(new qn.Error("Could not open request. Unable to load "+e))}});return wr[e]||(wr[e]=t),t}function te(e){"use strict";return typeof e}function ne(e,t,n){"use strict";var r=n.value;if("function"!=typeof r)throw new qn.Error("@autobind decorator can only be applied to methods not: "+("undefined"==typeof r?"undefined":te(r)));return{configurable:!0,get:function(){if(this===e.prototype||this.hasOwnProperty(t))return r;var n=r.bind(this);return qn.Object.defineProperty(this,t,{value:n,configurable:!0,writable:!0}),n},set:function(){return r}}}function re(e){"use strict";void 0===Or&&(Or=["constructor"]);var t=qn.Object.getOwnPropertyNames(e.prototype);return"function"==typeof qn.Object.getOwnPropertySymbols&&(t=t.concat(qn.Object.getOwnPropertySymbols(e.prototype))),t.forEach(function(t){if(!Or.includes(t)){var n=qn.Object.getOwnPropertyDescriptor(e.prototype,t);"function"==typeof n.value&&qn.Object.defineProperty(e.prototype,t,ne(e,t,n))}}),e}function ie(){"use strict";return 1===arguments.length?re.apply(void 0,arguments):ne.apply(void 0,arguments)}function oe(e){"use strict";return void 0===jr&&(o(),i(),s(),jr={default:Zn},kr={default:h}),new qn.Promise(function(t,n){var r=void 0,i=void 0;Er.is.isObject(e)&&("function"==typeof e.timeline&&"function"==typeof e.tween&&(r=e.timeline,i=e.tween),"boolean"==typeof e.debug&&(jr.default.debug=e.debug)),(0,kr.default)()&&qn.console.warn("You are running the development build of Spirit v2.0.3."),i&&r?(jr.default.gsap.tween=i,jr.default.gsap.timeline=r,t()):Er.gsap.ensure().then(t).catch(n)})}function se(e,t){"use strict";if(!(e instanceof t))throw new qn.TypeError("Cannot call a class as a function")}function ae(e,t){"use strict";if(!e)throw new qn.ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function ue(e,t){"use strict";if(!(e instanceof t))throw new qn.TypeError("Cannot call a class as a function")}function le(e,t){"use strict";if(!e)throw new qn.ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function ce(){"use strict";void 0===Ar&&(Ar={default:Vt});var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return ue(this,ce),le(this,(ce.__proto__||qn.Object.getPrototypeOf(ce)).call(this,e,Ar.default,["object",{}]))}function fe(){"use strict";void 0===Cr&&(Cr={default:ce});var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};se(this,fe);var t=ae(this,(fe.__proto__||qn.Object.getPrototypeOf(fe)).call(this));if(t._name="untitled",t._timeScale=1,t._timelines=new Cr.default,t.timeline=null,t.setMaxListeners(qn.Infinity),!e.name||"string"!=typeof e.name||""===e.name.trim())throw new qn.Error("Cannot create group without a name.");var n={name:"untitled",timeScale:1,timelines:new Cr.default};return qn.Object.assign(t,fr({},n,e)),t}function pe(e){"use strict";return new fe(e)}function he(e,t){"use strict";if(!(e instanceof t))throw new qn.TypeError("Cannot call a class as a function")}function de(e,t){"use strict";if(!e)throw new qn.ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function ve(){"use strict";void 0===Ir&&(a(),Ir={default:fe});var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qn.document.body,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];he(this,ve);var n=de(this,(ve.__proto__||qn.Object.getPrototypeOf(ve)).call(this,t,Ir.default,[{name:"untitled"}]));if(n.rootEl=null,!(e instanceof qn.window.Element))throw new qn.Error("No root element provided.");return n.rootEl=e,n.each(function(e){return Nr.default.add(e)}),n}function me(e,t){"use strict";void 0===Jr&&(Jr=null,o(),i(),s());var n=void 0;if("object"!==t.type){if(t.id&&(n=e.querySelector('[data-spirit-id="'+t.id+'"]'),!n&&!t.path))throw(0,Er.debug)()&&(qn.console.group("Unable to resolve element by [data-spirit-id] attribute"),qn.console.warn("Timeline: ",t),qn.console.groupEnd()),new qn.Error('Cannot find element with [data-spirit-id="'+t.id+'"]');if(!n&&t.path&&(e===qn.document.body&&(e=void 0),n=Er.xpath.getElement(t.path,e),!n))throw(0,Er.debug)()&&(qn.console.group("Unable to resolve element by path expression"),qn.console.warn("Timeline: ",t),qn.console.groupEnd()),new qn.Error("Cannot find element with path expression "+t.path);if(!n)throw(0,Er.debug)()&&(qn.console.group("Unable to resolve element"),qn.console.warn("Timeline: ",t),qn.console.groupEnd()),new qn.Error("Cannot find element.")}return n}function ye(e){"use strict";return"string"==typeof e.label&&e.label.trim().length>0?e.label:e.id?e.id:e.path?e.path:"undefined"}function ge(e){"use strict";void 0===Zr&&(Zr=null,o(),i(),s(),u());var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(!Er.context.isBrowser())throw new qn.Error("Invalid context. spirit.create() can only be executed in browser.");t instanceof qn.window.Element||(t=qn.document.body||qn.document.documentElement),!qn.Array.isArray(e)&&e.groups&&qn.Array.isArray(e.groups)&&(e=e.groups),qn.Array.isArray(e)||(e=[e]);var n=new Br.Groups(t,[]);return e.forEach(function(e){var r={name:e.name,timeScale:e.timeScale||1,timelines:[]};e.timelines.forEach(function(e){var n=me(t,e);r.timelines.push({transformObject:n,props:e.props,label:ye(e),path:Er.xpath.getExpression(n,t),id:e.id})});var i=new Br.Group(r);n.add(i)}),n}function be(e){"use strict";void 0===$r&&($r=null,o(),i(),s());var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return Er.context.isBrowser()?(0,Er.jsonloader)(e).then(function(e){return ge(e,t)}):qn.Promise.reject(new qn.Error("Invalid context: spirit.load() can only be executed in browser."))}function _e(){"use strict";void 0===Nn&&(Nn={default:Zn},xr={default:oe},Pr={default:Lr},Dr={create:ge,load:be},Rn.value=!0,Xn(Dr,"__esModule",Rn)),this.config=Nn.default,this.version="2.0.3",this.setup=xr.default,this.groups=Pr.default,this.create=Dr.create,this.load=Dr.load}function we(){"use strict";void 0===Qr&&(Qr=null,o(),i(),s(),void 0===ar&&(ar={default:N}));var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];y(this,we),Er.is.isObject(e)&&(e=Er.convert.objectToArray(e));var t=g(this,(we.__proto__||qn.Object.getPrototypeOf(we)).call(this,e,ar.default,["prop"]));return t.duplicates={prop:"name"},t.sortOn=function(e,t){return t.name<e.name},t.linkedList=!0,t._mappings=[],t}function Oe(){"use strict";void 0===Wr&&(Wr=null,o(),i(),s(),void 0===tr&&(tr={default:E}));var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];b(this,Oe),Er.is.isObject(e)&&(e=Er.convert.objectToArray(e));var t=_(this,(Oe.__proto__||qn.Object.getPrototypeOf(Oe)).call(this,e,tr.default,[0,0]));return t.duplicates={prop:"time"},t.sortOn="time",t.linkedList=!0,t._mappings=[],t}function Ee(){"use strict";return this._next}function je(){"use strict";return this._prev}function ke(){"use strict";return/{(.*?)}/.test(this._value)}function xe(e,t,n){"use strict";return t in e?qn.Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pe(){"use strict";var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=void 0;try{t=e?this._value:this.value}catch(e){t=this._value}return xe({},this.time+"s",{value:t,ease:this.ease})}function Ae(){"use strict";void 0===ei&&(ei=null,o(),i(),s()),Er.events.clearEvents(this,E.Events)}function Te(e){"use strict";this._value=e}function Le(e){return void 0===ti&&(ti=null,o(),void 0===gr&&(gr={default:C})),t.call(this,"value",Te,e)}function Se(e){return void 0===ni&&(ni=null,o(),void 0===gr&&(gr={default:C})),t.call(this,"ease",Re,e)}function Ce(e){return void 0===ri&&(ri=null,o(),void 0===gr&&(gr={default:C})),t.call(this,"time",Ue,e)}function Me(e){return void 0===ii&&(ii=null,o(),void 0===gr&&(gr={default:C})),t.call(this,"keyframes",Mt,e)}function Ie(e){return void 0===oi&&(oi=null,o(),void 0===gr&&(gr={default:C})),t.call(this,"name",Ye,e)}function Ne(e){return void 0===si&&(si=null,o(),void 0===gr&&(gr={default:C})),t.call(this,"timelines",fn,e)}function Ge(e){return void 0===ai&&(ai=null,o(),void 0===gr&&(gr={default:C})),t.call(this,"timeScale",pn,e)}function Be(e){return void 0===ui&&(ui=null,o(),void 0===gr&&(gr={default:C})),t.call(this,"duration",hn,e)}function De(e){return void 0===li&&(li=null,o(),void 0===gr&&(gr={default:C})),t.call(this,"name",dn,e)}function Fe(){"use strict";return this._list}function Re(e){return void 0===Rr&&(Rr=[]),n.call(this,Rr,"ease",e)}function Ue(e){return void 0===Ur&&(Ur=[{validator:qe,message:"Time must be a number"}]),n.call(this,Ur,"time",e)}function Ye(e){return void 0===Yr&&(Yr=[{validator:It,message:"Name must be a string"},{validator:Nt,message:"Name must be a string"}]),n.call(this,Yr,"name",e)}function qe(e){"use strict";return"number"==typeof e}function Xe(e){return"number"==typeof e}function Ke(e){if(!Xe(e)||e<0||qn.isNaN(e))throw qn.TypeError("n must be a positive number");return this._maxListeners=e,this}function Ve(e){return"object"==typeof e&&null!==e}function ze(e){return void 0===e}function He(e){return"function"==typeof e}function Je(e){var t,n,r,i,o,s;if(this._events||(this._events={}),"error"===e&&(!this._events.error||Ve(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof qn.Error)throw t;var a=new qn.Error('Uncaught, unspecified "error" event. ('+t+")");throw a.context=t,a}if(n=this._events[e],ze(n))return!1;if(He(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:i=qn.Array.prototype.slice.call(arguments,1),n.apply(this,i)}else if(Ve(n))for(i=qn.Array.prototype.slice.call(arguments,1),s=n.slice(),r=s.length,o=0;o<r;o++)s[o].apply(this,i);return!0}function Ze(e,t){var n;if(!He(t))throw qn.TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,He(t.listener)?t.listener:t),this._events[e]?Ve(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,Ve(this._events[e])&&!this._events[e].warned&&(n=ze(this._maxListeners)?j.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,qn.console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof qn.console.trace&&qn.console.trace())),this}function $e(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!He(t))throw qn.TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this}function Qe(e,t){var n,r,i,o;if(!He(t))throw qn.TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],i=n.length,r=-1,n===t||He(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(Ve(n)){for(o=i;o-- >0;)if(n[o]===t||n[o].listener&&n[o].listener===t){r=o;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this}function We(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],He(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this}function et(e){var t;return t=this._events&&this._events[e]?He(this._events[e])?[this._events[e]]:this._events[e].slice():[]}function tt(e){if(this._events){var t=this._events[e];if(He(t))return 1;if(t)return t.length}return 0}function nt(e){"use strict";if(void 0===ci&&(ci=null,o(),i(),s()),!Er.is.isObject(e))throw new qn.Error("Object is invalid");var t=qn.Object.keys(e);if(0===t.length||t.length>1)throw new qn.Error("Object is invalid");var n=t[0],r=e[n],a=r.value,u=r.ease;if(Er.is.isObject(e[n])||"string"!=typeof e[n]&&"number"!=typeof e[n]||(a=e[n],u=null),n=qn.parseFloat(n),qn.isNaN(n))throw new qn.Error("Object is invalid. Invalid time object { `1s`: ... }");if(void 0===a||null===a)throw new qn.Error("Object is invalid. No value found: {value}");return new E(n,a,u)}function rt(e,t,n){"use strict";null===e&&(e=qn.Function.prototype);var r=qn.Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var i=qn.Object.getPrototypeOf(e);return null===i?void 0:rt(i,t,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)}function it(e){"use strict";if(qn.Array.isArray(e)){for(var t=0,n=qn.Array(e.length);t<e.length;t++)n[t]=e[t];return n}return qn.Array.from(e)}function ot(e){"use strict";void 0===fi&&(fi=null,o(),i(),s(),void 0===tr&&(tr={default:E}));var t=this;Er.is.isObject(e)&&!(e instanceof tr.default)&&qn.Object.keys(e).length>1&&(e=Er.convert.objectToArray(e));var n=rt(Oe.prototype.__proto__||qn.Object.getPrototypeOf(Oe.prototype),"add",this).call(this,e),r=function(e){e.mappings=[].concat(it(t.mappings))};return qn.Array.isArray(n)?n.forEach(r):r(n),n}function st(e){"use strict";var t=rt(Oe.prototype.__proto__||qn.Object.getPrototypeOf(Oe.prototype),"remove",this).call(this,e),n=function(e){e.mappings=[]};return qn.Array.isArray(t)?t.forEach(n):n(t),t}function at(e){"use strict";var t=qn.parseFloat(e);return this._list.find(function(e){return e.time===t})}function ut(){"use strict";var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.list.reduce(function(t,n){return fr({},t,n.toObject(e))},{})}function lt(){"use strict";void 0===pi&&(pi=null,o(),i(),s()),this.each(function(e){return e.destroy()}),Er.events.clearEvents(this,Oe.Events)}function ct(e){"use strict";this._mappings=e,this.each(function(t){t.mappings=[].concat(it(e))})}function ft(){"use strict";void 0===ir&&o();var e=this._duplicates,t=!1,n=!1;if("boolean"==typeof e&&e===!1&&(t=this.list.map(function(e){return{count:1,item:e}}).reduce(function(e,t){return e[t.item]=(e[t.item]||0)+t.count,e},{})),ir.isObject(e)&&e.hasOwnProperty("prop")&&(n=!0,t=this.list.map(function(t){return{count:1,prop:t[e.prop]}}).reduce(function(e,t){return e[t.prop]=(e[t.prop]||0)+t.count,e},{})),t&&qn.Object.keys(t).filter(function(e){return t[e]>1}).length>0){var r=qn.Object.keys(t).find(function(e){return t[e]>1}),i=!!n&&e.prop+": "+r,s=!!this._model&&this.constructor.name+" > "+this._model.name+" > { "+i+" }";throw new qn.Error("List has duplicates. "+s)}}function pt(){"use strict";var e=this._sortOn;"boolean"==typeof e&&e===!0&&(this._list=this._list.sort()),"string"==typeof e&&(this._list=this._list.sort(function(t,n){return t[e]-n[e]})),"function"==typeof e&&(this._list=this._list.sort(e))}function ht(){"use strict";if(void 0===ir&&o(),this._linkedList)for(var e=0;e<this._list.length;e++){if(!ir.isObject(this._list[e]))throw new qn.Error("Can not link primitives.");this._list[e]._prev=e>0?this._list[e-1]:null,this._list[e]._next=e<this._list.length-1?this._list[e+1]:null}}function dt(e){"use strict";if(e>=this._list.length)throw new qn.Error("Index exceeded. Requested "+e+", have length of "+this.length);return this._list[e]}function vt(e){"use strict";void 0===ir&&o();var t=this,n=null,r=function(e){var r=void 0;if(t._model)if(e instanceof t._model)r=e,r._list=t,r.setupBubbleEvents&&"function"==typeof r.setupBubbleEvents&&r.setupBubbleEvents();else{if(!ir.isObject(e)||"function"!=typeof t._model.fromObject)throw new qn.Error("Invalid item.");r=t._model.fromObject(e),r._list=t,r.setupBubbleEvents&&"function"==typeof r.setupBubbleEvents&&r.setupBubbleEvents()}else r=e;qn.Array.isArray(n)?n.push(r):n=r,t._list.push(r),t.emit("add",r)};return qn.Array.isArray(e)?(n=[],e.forEach(r)):r(e),this.checkOnDuplicates(),this.sort(),this.linkItems(),n}function mt(e){"use strict";void 0===ir&&o();var t=this,n=null,r=function(e){var r=function(e){var r=t._list.indexOf(e);r>-1&&(t._list.splice(r,1),e._list&&e._list instanceof C&&(e._list=null),ir.isObject(e)&&("_prev"in e&&delete e._prev,"_next"in e&&delete e._next),t.emit("remove",e),qn.Array.isArray(n)?n.push(e):n=e)};t._model?e instanceof t._model&&r(e):r(e)};return qn.Array.isArray(e)?(n=[],e.forEach(r)):r(e),this.sort(),this.linkItems(),n}function yt(){"use strict";this.each(this.remove.bind(this))}function gt(e){"use strict";for(var t=[].concat(A(this.list)),n=[],r=!1,i=0;i<t.length;i++){var o=t[i];try{n.push(e(o,i))}catch(e){r=e}if(r)break}if(r)throw r;return n}function bt(){"use strict";void 0===ir&&o();var e=this._model?this.list.map(function(e){return e.toObject()}):this.list;return e.reduce(function(e,t){if(ir.isObject(t)){var n=fr({},t);delete n._prev,delete n._next,delete n._list,e.push(n)}else e.push(t);return e},[])}function _t(e){"use strict";this._duplicates=e,this.checkOnDuplicates()}function wt(e){"use strict";this._sortOn=e,this.sort()}function Ot(e){"use strict";
this._linkedList=e,this.linkItems()}function Et(e){"use strict";if(!qn.Array.isArray(e))throw new qn.Error("List should be an array");this._list=e,this._linkedList&&this.linkItems(),this.emit("change:list",e)}function jt(){"use strict";return this.list.length}function kt(){"use strict";return this._next}function xt(){"use strict";return this._prev}function Pt(){"use strict";void 0===hi&&(hi=null,o(),i(),s(),void 0===or&&(or={default:Oe}));var e=this;if(this._keyframes instanceof or.default){Er.events.clearEvents(this._keyframes,or.default.Events);var t=function(t,n){e._keyframes.on(t,Er.events.bubbleEvent(n,e))};t("change:list","change:keyframes:list"),t("change","change:keyframe"),t("change:time","change:keyframe:time"),t("change:value","change:keyframe:value"),t("change:ease","change:keyframe:ease"),t("add","add:keyframe"),t("remove","remove:keyframe")}}function At(e,t,n){"use strict";return t in e?qn.Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tt(){"use strict";var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.keyframes?this.keyframes.toObject(e):{};return At({},this.name,t)}function Lt(){"use strict";return["x","y","z","rotation","rotationZ","rotationX","rotationY","skewX","skewY","scale","scaleX","scaleY"].includes(this.name)}function St(){"use strict";void 0===di&&(di=null,o(),i(),s()),this._keyframes&&this._keyframes.destroy(),Er.events.clearEvents(this,N.Events)}function Ct(){"use strict";return this._list}function Mt(e){"use strict";void 0===vi&&(vi=null,o(),i(),s(),void 0===or&&(or={default:Oe})),e instanceof or.default||(e=new or.default(e));var t=[];this._keyframes&&(t=this._keyframes.mappings,Er.events.clearEvents(this._keyframes,or.default.Events),this._keyframes.clear()),this._keyframes=e,this._keyframes.mappings=t,this.setupBubbleEvents()}function It(e){"use strict";return"string"==typeof e}function Nt(e){"use strict";return!/^\d+\.?\d*?$/.test(e)}function Gt(e){"use strict";if(void 0===mi&&(mi=null,o(),i(),s()),!Er.is.isObject(e))throw new qn.Error("Object is invalid");var t=qn.Object.keys(e);if(0===t.length)throw new qn.Error("Object is invalid");for(var n in e)if(!Er.is.isObject(e[n]))throw new qn.Error("Object is invalid");var r=t[0];return new N(r,e[r])}function Bt(e){"use strict";return this._list.find(function(t){return t.name===e})}function Dt(e,t,n){"use strict";null===e&&(e=qn.Function.prototype);var r=qn.Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var i=qn.Object.getPrototypeOf(e);return null===i?void 0:Dt(i,t,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)}function Ft(e){"use strict";if(qn.Array.isArray(e)){for(var t=0,n=qn.Array(e.length);t<e.length;t++)n[t]=e[t];return n}return qn.Array.from(e)}function Rt(e){"use strict";void 0===yi&&(yi=null,o(),i(),s(),void 0===ar&&(ar={default:N}));var t=this;Er.is.isObject(e)&&!(e instanceof ar.default)&&qn.Object.keys(e).length>1&&(e=Er.convert.objectToArray(e));var n=Dt(we.prototype.__proto__||qn.Object.getPrototypeOf(we.prototype),"add",this).call(this,e),r=function(e){e.keyframes.mappings=[].concat(Ft(t.mappings))};return qn.Array.isArray(n)?n.forEach(r):r(n),n}function Ut(e){"use strict";var t=Dt(we.prototype.__proto__||qn.Object.getPrototypeOf(we.prototype),"remove",this).call(this,e),n=function(e){e.keyframes.mappings=[]};return qn.Array.isArray(t)?t.forEach(n):n(t),t}function Yt(e){"use strict";return!!this.get(e)}function qt(){"use strict";var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.list.reduce(function(t,n){return fr({},t,n.toObject(e))},{})}function Xt(){"use strict";void 0===gi&&(gi=null,o(),i(),s()),this.each(function(e){return e.destroy()}),Er.events.clearEvents(this,we.Events)}function Kt(e){"use strict";this._mappings=e,this.each(function(t){t.keyframes.mappings=[].concat(Ft(e))})}function Vt(){"use strict";void 0===cr&&(o(),i(),s(),void 0===lr&&(lr={default:we}),cr={default:D});var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dom",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new lr.default,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;if(G(this,Vt),this.type="dom",this.transformObject=null,this.label=null,this.path=null,this.id=null,this.props=null,n instanceof lr.default||(n=new lr.default(n)),qn.Object.assign(this,{type:e,transformObject:t,props:n,label:u,path:r,id:a}),"dom"===e){if(!t||Er.context.isBrowser()&&!(t instanceof qn.window.Element))throw new qn.Error("transformObject needs to be an element.");if(!a&&!r)throw new qn.Error("path is not defined")}if("object"===e&&!t)throw new qn.Error("transformObject needs to be an object");this.props.mappings=[new cr.default(/this/g,t)]}function zt(e){"use strict";if(void 0===bi&&(bi=null,o(),i(),s()),!Er.is.isObject(e))throw new qn.Error("Object is invalid.");var t=qn.Object.keys(e);if(!t.includes("transformObject"))throw new qn.Error("Object is invalid");var n=Er.convert.objectToArray(e).filter(function(e){return void 0!==e});return n=fr({type:n.type||"dom",props:{}},Er.convert.arrayToObject(n)),new Vt(n.type,n.transformObject,n.props,n.path||void 0,n.id||void 0,n.label||void 0)}function Ht(){"use strict";var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t={type:this.type,transformObject:this.transformObject,props:this.props.toObject(e),label:this.label,path:this.path,id:this.id};return qn.Object.keys(t).forEach(function(e){t[e]||delete t[e]}),t}function Jt(){"use strict";void 0===lr&&(lr={default:we}),this.props instanceof lr.default&&this.props.each(function(e){return e.destroy()})}function Zt(e,t){"use strict";if(!(e instanceof t))throw new qn.TypeError("Cannot call a class as a function")}function $t(e,t){"use strict";if(!e)throw new qn.ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Qt(){"use strict";return Zt(this,Qt),$t(this,(Qt.__proto__||qn.Object.getPrototypeOf(Qt)).call(this,[]))}function Wt(e,t,n){"use strict";null===e&&(e=qn.Function.prototype);var r=qn.Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var i=qn.Object.getPrototypeOf(e);return null===i?void 0:Wt(i,t,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)}function en(e){"use strict";if(void 0===_i&&(_i=null,o(),i(),s(),u()),!(e instanceof Br.Group))throw new qn.Error("Invalid group. Only Group instances allowed.");this.groupNames().includes(e.name)?(0,Er.debug)()&&qn.console.warn('registry.add() Group "'+e.name+'" already exist in registry. Skip registry (spirit.groups)'):((0,Er.debug)()&&qn.console.warn('registry.add() Group "'+e.name+'" added to registry (spirit.groups) and can be resolved by Spirit app'),Wt(Qt.prototype.__proto__||qn.Object.getPrototypeOf(Qt.prototype),"add",this).call(this,e))}function tn(e){"use strict";return this.list.find(function(t){return t.name===e})}function nn(){"use strict";return this.list.map(function(e){return e.name})}function rn(e){"use strict";return this._list.find(function(t){return t.transformObject===e})}function on(){"use strict";var e=this.name,t=this.timeScale,n=this.timelines.toArray();return{name:e,timeScale:t,timelines:n}}function sn(){"use strict";void 0===wi&&(wi=null,o(),i(),s()),this.timeline&&Er.gsap.killTimeline(this.timeline)}function an(e,t){"use strict";if(!(e instanceof t))throw new qn.TypeError("Cannot call a class as a function")}function un(e,t){"use strict";if(!e)throw new qn.ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function ln(e,t){"use strict";var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;an(this,ln);var r=un(this,(ln.__proto__||qn.Object.getPrototypeOf(ln)).call(this,e));return r.transformObject=null,n?r.stack=n:qn.Error.captureStackTrace(r,ln),r.transformObject=t,r.name="TimelineError",r.message=e,r}function cn(){"use strict";void 0===Vr&&(o(),i(),s(),void 0===qr&&(qr={default:Zn}),Vr={TimelineError:ln},Rn.value=!0,Xn(Vr,"__esModule",Rn));var e=this;try{if(!qr.default.gsap.timeline||!qr.default.gsap.tween)throw(0,Er.debug)()&&qn.console.warn("\n            Trying to construct group "+this.name+", but GSAP cannot be found.\n            \n            Did you forgot to call spirit.setup() perhaps?\n            \n            @usage\n                \n                spirit.setup().then(function(){\n                  // gsap is loaded here..\n                })\n                \n            or provide gsap instances manually:\n            \n                spirit.setup({ \n                  tween:    TweenLite,\n                  timeline: TimelineLite\n                }).then(function(){\n                  // gsap is loaded here..\n                })\n                \n          "),new qn.Error("GSAP cannot be found");this.timeline&&this.timeline instanceof qr.default.gsap.timeline?Er.gsap.killTimeline(this.timeline):this.timeline=new qr.default.gsap.timeline({paused:!0}),this.timelines.each(function(t){if("dom"===t.type){var n=t.transformObject;if(!(n instanceof qn.window.Element))throw new Vr.TimelineError("transformObject is not an Element",n);try{e.timeline.add(Er.gsap.generateTimeline(t).play(),0,"start")}catch(e){throw new Vr.TimelineError(e.message,n,e.stack)}}}),this.timeline.timeScale(this.timeScale),this._duration=this.timeline.duration()}catch(e){throw e.message="Could not construct timeline: "+e.message,e}return this.emit("construct",this.timeline),this.timeline}function fn(e){"use strict";void 0===Cr&&(Cr={default:ce}),e instanceof Cr.default||(e=new Cr.default(qn.Array.from(e))),this._timelines=e}function pn(e){"use strict";if(void 0===qr&&(qr={default:Zn}),"number"!=typeof e||!qn.isFinite(e))throw new qn.Error("timeScale needs to be a number");this.timeline&&this.timeline instanceof qr.default.gsap.timeline&&this.timeline.timeScale(e),this._timeScale=e}function hn(e){"use strict";void 0===qr&&(qr={default:Zn}),this.timeline&&this.timeline instanceof qr.default.gsap.timeline&&(this.timeline.duration(e),this.timeScale=this.timeline.timeScale(),this._duration=this.timeline.duration())}function dn(e){"use strict";if("string"!=typeof e)throw new qn.Error("Name needs to be a string");this._name=e}function vn(e,t,n){"use strict";null===e&&(e=qn.Function.prototype);var r=qn.Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var i=qn.Object.getPrototypeOf(e);return null===i?void 0:vn(i,t,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)}function mn(e){"use strict";void 0===Nr&&a();var t=vn(ve.prototype.__proto__||qn.Object.getPrototypeOf(ve.prototype),"add",this).call(this,e);return qn.Array.isArray(t)?t.forEach(function(e){return Nr.default.add(e)}):Nr.default.add(t),t}function yn(e){"use strict";void 0===Nr&&a();var t=vn(ve.prototype.__proto__||qn.Object.getPrototypeOf(ve.prototype),"remove",this).call(this,e);return qn.Array.isArray(t)?t.forEach(function(e){return Nr.default.remove(e)}):Nr.default.remove(t),t}function gn(){"use strict";if(void 0===zr&&(o(),i(),s(),zr={default:Zn}),!zr.default.gsap.timeline||!zr.default.gsap.tween)throw(0,Er.debug)()&&qn.console.warn("\n            Trying to construct groups, but GSAP cannot be found.\n            \n            Did you forgot to call spirit.setup() ?\n            \n            spirit.setup() usage:\n            \n                // auto inject gsap from cdn:\n                spirit.setup()\n                \n                // or provide gsap instances manually:\n                spirit.setup({\n                  tween:    TweenMax,\n                  timeline: TimelineMax\n                })\n          "),new qn.Error("GSAP cannot be found");return this.list.map(function(e){return e.construct()})}function bn(e){"use strict";return this.list.find(function(t){return t.name===e})}function _n(){"use strict";return this._name}function wn(){"use strict";return this.timeline?this.timeline.duration():0}function On(){"use strict";return this._timeScale}function En(){"use strict";return this._timelines}function jn(){"use strict";return this._mappings}function kn(){return r.call(this,"name")}function xn(){return r.call(this,"time")}function Pn(){return r.call(this,"ease")}function An(){"use strict";return this._keyframes}function Tn(){"use strict";return this._list}function Ln(){"use strict";return this._linkedList}function Sn(){"use strict";return this._sortOn}function Cn(){"use strict";return this._duplicates}function Mn(){"use strict";return this._mappings}function In(){"use strict";var e=this;if(this.isEval()){var t=this.mappings.reduce(function(t,n){return n.regex.global&&(n.regex.lastIndex=0),n.regex.test(e._value)&&(t[n.regex]=n),t},{}),n=this._value;for(var r in t)n=n.replace(t[r].regex,"mappings["+r+"].map");var i=void 0;try{i=qn.eval(n)}catch(e){if(this.mappings.length>0)throw e}return i}return this._value}var Nn,Gn,Bn,Dn,Fn={enumerable:!1,configurable:!0,writable:!1},Rn={enumerable:!1,configurable:!1,writable:!1},Un={enumerable:!1,configurable:!0,writable:!0},Yn={enumerable:!1,configurable:!0},qn=this,Xn=Object.defineProperty,Kn=Object.setPrototypeOf,Vn=c.prototype,zn=j.prototype,Hn=_e.prototype,Jn=Vt.prototype,Zn=(e.prototype=Vn,new e),$n=this;Fn.value="debug",Xn(h,"name",Fn);var Qn;Fn.value="loadScript",Xn(d,"name",Fn);var Wn;Fn.value="EventEmitter",Xn(j,"name",Fn),j.EventEmitter=j,j.defaultMaxListeners=10,j.listenerCount=k;var er=(e.prototype=zn,new e);E.prototype=er,Fn.value="Keyframe",Xn(E,"name",Fn),E.fromObject=nt,E.Events=["change","change:time","change:value","change:ease"],Kn(E,j);var tr,nr=(e.prototype=zn,new e),rr=(e.prototype=nr,new e);Oe.prototype=rr,Fn.value="Keyframes",Xn(Oe,"name",Fn),Oe.Events=["change:list","add","remove","change","change:time","change:value","change:ease"];var ir;C.prototype=nr,Fn.value="List",Xn(C,"name",Fn),C.Events=["change:list","add","remove"],Kn(C,j),Kn(Oe,C);var or,sr=(e.prototype=zn,new e);N.prototype=sr,Fn.value="Prop",Xn(N,"name",Fn),N.fromObject=Gt,N.Events=["change","change:name","change:keyframes","change:keyframes:list","change:keyframe","change:keyframe:time","change:keyframe:value","change:keyframe:ease","add:keyframe","remove:keyframe"],Kn(N,j);var ar,ur=(e.prototype=nr,new e);we.prototype=ur,Fn.value="Props",Xn(we,"name",Fn),we.Events=["change:list","add","remove","change","change:name","change:keyframes","change:keyframes:list","change:keyframe","change:keyframe:time","change:keyframe:value","change:keyframe:ease","add:keyframe","remove:keyframe"],Kn(we,C);var lr;Fn.value="EvalMap",Xn(D,"name",Fn);var cr;Fn.value="Timeline",Xn(Vt,"name",Fn);var fr=Object.assign;Vt.fromObject=zt;var pr,hr,dr,vr,mr,yr,gr,br,_r,wr,Or,Er,jr,kr;Fn.value="setup",Xn(oe,"name",Fn);var xr,Pr,Ar,Tr=(e.prototype=nr,new e),Lr=(e.prototype=Tr,new e),Sr=(e.prototype=nr,new e);ce.prototype=Sr,Fn.value="Timelines",Xn(ce,"name",Fn),Kn(ce,C);var Cr,Mr=(e.prototype=zn,new e);fe.prototype=Mr,Fn.value="Group",Xn(fe,"name",Fn),fe.fromObject=pe,Kn(fe,j);var Ir,Nr,Gr=(e.prototype=nr,new e);ve.prototype=Gr,Fn.value="Groups",Xn(ve,"name",Fn),Kn(ve,C);var Br,Dr,Fr=(e.prototype=Hn,new e);if(Fr.config=Zn,Fr.version="2.0.3",Fr.setup=oe,Fr.groups=Lr,Fr.create=ge,Fr.load=be,Fr.__proto__!==Hn)throw new Error("unexpected prototype");if(Zn.debug=!0,Zn.__proto__!==Vn)throw new Error("unexpected prototype");Un.value=E,Xn(er,"constructor",Un),Fn.value="set",Xn(Te,"name",Fn),Yn.set=void 0,Un.value=null,Xn(er,"_ease",Un);var Rr;Fn.value="set",Xn(Re,"name",Fn),Un.value=null,Xn(er,"_time",Un);var Ur;if(Fn.value="set",Xn(Ue,"name",Fn),er.__proto__!==zn)throw new Error("unexpected prototype");if(zn._events=void 0,zn._maxListeners=void 0,zn.on=Ze,Un.value=Oe,Xn(rr,"constructor",Un),Fn.value="get",Xn(rt,"name",Fn),rr.__proto__!==nr)throw new Error("unexpected prototype");if(Un.value=C,Xn(nr,"constructor",Un),Yn.set=void 0,nr.__proto__!==zn)throw new Error("unexpected prototype");Un.value=N,Xn(sr,"constructor",Un),Yn.set=void 0,Fn.value="set",Xn(Mt,"name",Fn),Un.value=null,Xn(sr,"_name",Un);var Yr;if(Fn.value="set",Xn(Ye,"name",Fn),sr.__proto__!==zn)throw new Error("unexpected prototype");if(Un.value=we,Xn(ur,"constructor",Un),Fn.value="get",Xn(Dt,"name",Fn),ur.__proto__!==nr)throw new Error("unexpected prototype");if(Lr._maxListeners=1/0,Lr._model=null,Lr._duplicates=!0,Lr._sortOn=!1,Lr._linkedList=!1,Lr.__proto__!==Tr)throw new Error("unexpected prototype");if(Qt.prototype=Tr,Kn(Qt,C),Fn.value="get",Xn(Wt,"name",Fn),Tr.__proto__!==nr)throw new Error("unexpected prototype");if(Un.value=ce,Xn(Sr,"constructor",Un),Sr.__proto__!==nr)throw new Error("unexpected prototype");Un.value=fe,Xn(Mr,"constructor",Un);var qr,Xr=Error.prototype,Kr=(e.prototype=Xr,new e);ln.prototype=Kr,Kn(ln,Error);var Vr;if(Fn.value="set",Xn(fn,"name",Fn),Fn.value="set",Xn(pn,"name",Fn),Fn.value="set",Xn(hn,"name",Fn),Fn.value="set",Xn(dn,"name",Fn),Mr.__proto__!==zn)throw new Error("unexpected prototype");Un.value=ve,Xn(Gr,"constructor",Un),Fn.value="get",Xn(vn,"name",Fn);var zr;if(Gr.__proto__!==nr)throw new Error("unexpected prototype");if(Un.value=ln,Xn(Kr,"constructor",Un),Kr.__proto__!==Xr)throw new Error("unexpected prototype");Un.value=bn,Xn(Gr,"get",Un),Un.value=gn,Xn(Gr,"construct",Un),Un.value=yn,Xn(Gr,"remove",Un),Un.value=mn,Xn(Gr,"add",Un),Yn.set=De,Yn.get=_n,Xn(Mr,"name",Yn),Yn.set=Be,Yn.get=wn,Xn(Mr,"duration",Yn),Yn.set=Ge,Yn.get=On,Xn(Mr,"timeScale",Yn),Yn.set=Ne,Yn.get=En,Xn(Mr,"timelines",Yn),Un.value=cn,Xn(Mr,"construct",Un),Un.value=sn,Xn(Mr,"reset",Un),Un.value=on,Xn(Mr,"toObject",Un),Un.value=rn,Xn(Sr,"get",Un),Un.value=nn,Xn(Tr,"groupNames",Un),Un.value=tn,Xn(Tr,"get",Un),Un.value=en,Xn(Tr,"add",Un),Un.value=Qt,Xn(Tr,"constructor",Un),Lr._list=[],Lr._events={},Un.value=Jt,Xn(Jn,"destroy",Un),Un.value=Ht,Xn(Jn,"toObject",Un),Yn.set=Kt,Yn.get=jn,Xn(ur,"mappings",Yn),Un.value=Xt,Xn(ur,"destroy",Un),Un.value=qt,Xn(ur,"toObject",Un),Un.value=Yt,Xn(ur,"haveProp",Un),Un.value=Ut,Xn(ur,"remove",Un),Un.value=Rt,Xn(ur,"add",Un),Un.value=Bt,Xn(ur,"get",Un),Yn.set=Ie,Yn.get=kn,Xn(sr,"name",Yn),Yn.set=Me,Yn.get=An,Xn(sr,"keyframes",Yn),Yn.get=Ct,Xn(sr,"list",Yn),Un.value=St,Xn(sr,"destroy",Un),Un.value=Lt,Xn(sr,"isCSSTransform",Un),Un.value=Tt,Xn(sr,"toObject",Un),Un.value=Pt,Xn(sr,"setupBubbleEvents",Un),Un.value=xt,Xn(sr,"prev",Un),Un.value=kt,Xn(sr,"next",Un),Yn.get=jt,Xn(nr,"length",Yn),Yn.set=Et,Yn.get=Tn,Xn(nr,"list",Yn),Yn.set=Ot,Yn.get=Ln,Xn(nr,"linkedList",Yn),Yn.set=wt,Yn.get=Sn,Xn(nr,"sortOn",Yn),Yn.set=_t,Yn.get=Cn,Xn(nr,"duplicates",Yn),Un.value=bt,Xn(nr,"toArray",Un),Un.value=gt,Xn(nr,"each",Un),Un.value=yt,Xn(nr,"clear",Un),Un.value=mt,Xn(nr,"remove",Un),Un.value=vt,Xn(nr,"add",Un),Un.value=dt,Xn(nr,"at",Un),Un.value=ht,Xn(nr,"linkItems",Un),Un.value=pt,Xn(nr,"sort",Un),Un.value=ft,Xn(nr,"checkOnDuplicates",Un),Yn.set=ct,Yn.get=Mn,Xn(rr,"mappings",Yn),Un.value=lt,Xn(rr,"destroy",Un),Un.value=ut,Xn(rr,"toObject",Un),Un.value=at,Xn(rr,"get",Un),Un.value=st,Xn(rr,"remove",Un),Un.value=ot,Xn(rr,"add",Un),zn.listenerCount=tt,zn.listeners=et,zn.removeAllListeners=We,zn.removeListener=Qe,zn.once=$e,zn.addListener=Ze,zn.emit=Je,zn.setMaxListeners=Ke,Yn.set=Ce,Yn.get=xn,Xn(er,"time",Yn),Yn.set=Se,Yn.get=Pn,Xn(er,"ease",Yn),Yn.get=Fe,Xn(er,"list",Yn),Yn.set=Le,Yn.get=In,Xn(er,"value",Yn),Un.value=Ae,Xn(er,"destroy",Un),Un.value=Pe,Xn(er,"toObject",Un),Un.value=ke,Xn(er,"isEval",Un),Un.value=je,Xn(er,"prev",Un),Un.value=Ee,Xn(er,"next",Un),Zn.gsap={tween:null,timeline:null,autoInject:!0,autoInjectUrl:"https://unpkg.com/gsap/src/minified/TweenMax.min.js"},spirit=Fr;var Hr,Jr,Zr,$r,Qr,Wr,ei,ti,ni,ri,ii,oi,si,ai,ui,li,ci,fi,pi,hi,di,vi,mi,yi,gi,bi,_i,wi}).call(this);