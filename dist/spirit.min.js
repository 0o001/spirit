/*!
 * Spirit.js v2.0.0
 * (c) 2017 Patrick Brouwer
 * Released under the MIT License.
 */
(function(){function t(){return r(ui)}function e(){return r(A)}function n(){return r(h)}function i(){return r(Fn)}function r(t){return{default:t}}function s(t){return this["_"+t]}function o(t){"use strict";return new kn.Promise(function(e,n){var i=void 0,r=void 0;ai.is.isObject(t)&&"function"==typeof t.timeline&&"function"==typeof t.tween&&(i=t.timeline,r=t.tween),r&&i?(ci.default.gsap.tween=r,ci.default.gsap.timeline=i,e()):ai.gsap.ensure().then(e).catch(n)})}function a(){"use strict";return"window"in Mn&&"document"in Mn}function c(){"use strict";return!(!Cn.default.gsap.tween||!Cn.default.gsap.timeline)}function u(){"use strict";return c()?kn.Promise.resolve():Cn.default.gsap.autoInject?(Nn.default&&kn.console.warn("\n      \n      GSAP is being fetched from CDN: "+Cn.default.gsap.autoInjectUrl+".\n      If you already have GSAP installed, please provide it to Spirit:\n      \n        spirit.setup({\n          tween: TweenMax,\n          timeline: TimelineMax\n        })\n      \n      You want to use another cdn? Change it here:\n       \n        spirit.config.gsap.autoInjectUrl = 'https://cdn.xxx'\n      \n    "),(0,Dn.default)(Cn.default.gsap.autoInjectUrl).then(function(){return Cn.default.gsap.tween=kn.window.TweenMax,Cn.default.gsap.timeline=kn.window.TimelineMax,kn.Promise.resolve()})):(Nn.default&&kn.console.warn('\n      \n        It seems that you have disabled autoInject. GSAP can not be found by Spirit.\n        Please make sure you provide the tween and timeline to Spirit.\n      \n        For example:\n        \n        spirit.setup({\n          tween: TweenMax,\n          timeline: TimelineMax\n        })\n        \n        Or enable the autoInject "spirit.config.gsap.autoInject = true".\n        \n      '),kn.Promise.reject(new kn.Error("GSAP not found.")))}function l(t){"use strict";return(0,In.isBrowser)()?new kn.Promise(function(e,n){var i=kn.document.createElement("script");i.src=t,i.async=!0,i.onload=function(){kn.document.body.removeChild(i),e()},i.onerror=function(){kn.document.body.removeChild(i),n(new kn.Error("Could not load script "+t))},kn.document.body.appendChild(i)}):kn.Promise.reject(new kn.Error("Script can only be loaded in browser: "+t))}function f(t){"use strict";if(!(t&&t instanceof Zn.default))throw new kn.Error("Need valid timeline data to generate GSAP timeline from");if(!Cn.default.gsap.timeline)throw new kn.Error("GSAP not set. Please make sure GSAP is available.");if("dom"!==t.type)throw new kn.Error("Timeline invalid. Needs a timeline with type of dom.");var e=new Cn.default.gsap.timeline({paused:!0});return t.props.each(function(n){for(var i=n.keyframes.at(0);i;){var r,s=i,o=s.value,a=s.ease,c=s.time,u=i.prev(),l=u?u.time:0,f=u?c-u.time:c,h=(r={},R(r,n.name,o),R(r,"ease",a||"Linear.easeNone"),r);0===c&&(h.immediateRender=!0),e.to(t.transformObject,f,h,l),i=i.next()}}),e}function h(){"use strict";var t=arguments.length>0&&arguments[0]!==kn.undefined?arguments[0]:"dom",e=arguments.length>1&&arguments[1]!==kn.undefined?arguments[1]:null,n=arguments.length>2&&arguments[2]!==kn.undefined?arguments[2]:new Kn.default,i=arguments.length>3&&arguments[3]!==kn.undefined?arguments[3]:null,r=arguments.length>4&&arguments[4]!==kn.undefined?arguments[4]:null,s=arguments.length>5&&arguments[5]!==kn.undefined?arguments[5]:null;if(N(this,h),this.type="dom",this.transformObject=null,this.label=null,this.path=null,this.id=null,this.props=null,n instanceof Kn.default||(n=new Kn.default(n)),kn.Object.assign(this,{type:t,transformObject:e,props:n,label:s,path:i,id:r}),"dom"===t){if(!e||ai.context.isBrowser()&&!(e instanceof kn.window.Element))throw new kn.Error("transformObject needs to be an element.");if(!r&&!i)throw new kn.Error("path is not defined")}if("object"===t&&!e)throw new kn.Error("transformObject needs to be an object");this.props.mappings=[new zn.default(/this/g,e)]}function p(){"use strict";var t=arguments.length>0&&arguments[0]!==kn.undefined?arguments[0]:[];d(this,p),ai.is.isObject(t)&&(t=ai.convert.objectToArray(t));var e=v(this,(p.__proto__||kn.Object.getPrototypeOf(p)).call(this,t,Hn.default,["prop"]));return e.duplicates={prop:"name"},e.sortOn=function(t,e){return e.name<t.name},e.linkedList=!0,e._mappings=[],e}function d(t,e){"use strict";if(!(t instanceof e))throw new kn.TypeError("Cannot call a class as a function")}function v(t,e){"use strict";if(!t)throw new kn.ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function m(t){"use strict";var e=arguments.length>1&&arguments[1]!==kn.undefined?arguments[1]:new qn.default;M(this,m);var n=I(this,(m.__proto__||kn.Object.getPrototypeOf(m)).call(this));return n._keyframes=null,n._list=null,n.setMaxListeners(kn.Infinity),e instanceof qn.default||(e=new qn.default(e)),t=t||null,kn.Object.assign(n,{name:t,keyframes:e}),n}function y(){"use strict";var t=arguments.length>0&&arguments[0]!==kn.undefined?arguments[0]:[];b(this,y),ai.is.isObject(t)&&(t=ai.convert.objectToArray(t));var e=_(this,(y.__proto__||kn.Object.getPrototypeOf(y)).call(this,t,Bn.default,[0,0]));return e.duplicates={prop:"time"},e.sortOn="time",e.linkedList=!0,e._mappings=[],e}function b(t,e){"use strict";if(!(t instanceof e))throw new kn.TypeError("Cannot call a class as a function")}function _(t,e){"use strict";if(!t)throw new kn.ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function g(t,e){"use strict";var n=arguments.length>2&&arguments[2]!==kn.undefined?arguments[2]:null;w(this,g);var i=O(this,(g.__proto__||kn.Object.getPrototypeOf(g)).call(this));return i._list=null,i._value=null,i.mappings=[],i.setMaxListeners(kn.Infinity),n=n||null,kn.Object.assign(i,{time:t,value:e,ease:n}),i}function w(t,e){"use strict";if(!(t instanceof e))throw new kn.TypeError("Cannot call a class as a function")}function O(t,e){"use strict";if(!t)throw new kn.ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function j(t){"use strict";if(!ai.is.isObject(t))throw new kn.Error("Object is invalid");var e=kn.Object.keys(t);if(0===e.length||e.length>1)throw new kn.Error("Object is invalid");var n=e[0],i=t[n],r=i.value,s=i.ease;if(ai.is.isObject(t[n])||"string"!=typeof t[n]&&"number"!=typeof t[n]||(r=t[n],s=null),n=kn.parseFloat(n),kn.isNaN(n))throw new kn.Error("Object is invalid. Invalid time object { `1s`: ... }");if(r===kn.undefined||null===r)throw new kn.Error("Object is invalid. No value found: {value}");return new g(n,r,s)}function E(){this._events=this._events||{},this._maxListeners=this._maxListeners||kn.undefined}function k(t,e){return t.listenerCount(e)}function A(){"use strict";var t=arguments.length>0&&arguments[0]!==kn.undefined?arguments[0]:[],e=arguments.length>1&&arguments[1]!==kn.undefined?arguments[1]:null,n=arguments.length>2&&arguments[2]!==kn.undefined?arguments[2]:kn.undefined;x(this,A);var i=P(this,(A.__proto__||kn.Object.getPrototypeOf(A)).call(this));if(i._list=[],i._model=null,i._duplicates=!0,i._sortOn=!1,i._linkedList=!1,i.setMaxListeners(kn.Infinity),i._model=e,e){var r=n!==kn.undefined?new(kn.Function.prototype.bind.apply(e,[null].concat(T(n)))):new e;if("function"!=typeof r.toObject)throw new kn.Error("Invalid Model prototype. model.toObject does not exist.")}if(!kn.Array.isArray(t))throw new kn.Error("Items should be an array");return i._list=t.reduce(function(t,n){if(i._model)if(n instanceof i._model)n._list=i,n.setupBubbleEvents&&"function"==typeof n.setupBubbleEvents&&n.setupBubbleEvents(),t.push(n);else{if(!Un.isObject(n)||"function"!=typeof e.fromObject)throw new kn.Error("Could not parse item from model");var r=e.fromObject(n);r._list=i,r.setupBubbleEvents&&"function"==typeof r.setupBubbleEvents&&r.setupBubbleEvents(),t.push(r)}else t.push(n);return t},[]),i}function x(t,e){"use strict";if(!(t instanceof e))throw new kn.TypeError("Cannot call a class as a function")}function P(t,e){"use strict";if(!t)throw new kn.ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function T(t){"use strict";if(kn.Array.isArray(t)){for(var e=0,n=kn.Array(t.length);e<t.length;e++)n[e]=t[e];return n}return kn.Array.from(t)}function L(t){"use strict";return"[object Object]"===kn.Object.prototype.toString.call(t)}function S(t){"use strict";return t instanceof kn.window.SVGElement}function F(t){"use strict";return"function"==typeof t}function M(t,e){"use strict";if(!(t instanceof e))throw new kn.TypeError("Cannot call a class as a function")}function I(t,e){"use strict";if(!t)throw new kn.ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function C(t){"use strict";if(!ai.is.isObject(t))throw new kn.Error("Object is invalid");var e=kn.Object.keys(t);if(0===e.length)throw new kn.Error("Object is invalid");for(var n in t)if(!ai.is.isObject(t[n]))throw new kn.Error("Object is invalid");var i=e[0];return new m(i,t[i])}function N(t,e){"use strict";if(!(t instanceof e))throw new kn.TypeError("Cannot call a class as a function")}function D(t,e){"use strict";if(G(this,D),!t||t&&!(t instanceof kn.RegExp))throw new kn.Error("Invalid expression.");if(null===e||e===kn.undefined)throw new kn.Error("Invalid mapping.");kn.Object.assign(this,{regex:t,map:e})}function G(t,e){"use strict";if(!(t instanceof e))throw new kn.TypeError("Cannot call a class as a function")}function B(t){"use strict";if(!ai.is.isObject(t))throw new kn.Error("Object is invalid.");var e=kn.Object.keys(t);if(!e.includes("transformObject"))throw new kn.Error("Object is invalid");var n=ai.convert.objectToArray(t).filter(function(t){return t!==kn.undefined});return n=Jn({type:n.type||"dom",props:{}},ai.convert.arrayToObject(n)),new h(n.type,n.transformObject,n.props,n.path||kn.undefined,n.id||kn.undefined,n.label||kn.undefined)}function R(t,e,n){"use strict";return e in t?kn.Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function U(t,e){"use strict";if(!(e instanceof E.EventEmitter))throw new kn.Error("Scope needs to be an event emitter.");return function(){if(this.emit.apply(this,[t].concat(kn.Array.prototype.slice.call(arguments))),this._list instanceof Wn.default){var e;(e=this._list).emit.apply(e,[t].concat(kn.Array.prototype.slice.call(arguments)))}}.bind(e)}function Y(t,e,n,i,r){"use strict";var s={prevModel:t.fromObject(e),model:t.fromObject(Jn({},e,q({},n,r))),changed:{type:n,from:i,to:r}};return s}function q(t,e,n){"use strict";return e in t?kn.Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function X(t){"use strict";var e=arguments.length>1&&arguments[1]!==kn.undefined?arguments[1]:[];t.eventNames&&"function"==typeof t.eventNames?t.eventNames().forEach(function(e){return t.removeAllListeners(e)}):e.forEach(function(e){return t.removeAllListeners(e)})}function H(t){"use strict";return kn.Object.keys(t).reduce(function(e,n){return e.push(V({},n,t[n])),e},[])}function V(t,e,n){"use strict";return e in t?kn.Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function K(t){"use strict";return t.reduce(function(t,e){return t=Jn({},t,e)},{})}function z(t){"use strict";for(var e=arguments.length>1&&arguments[1]!==kn.undefined?arguments[1]:null,n=[],i=function(){return!e||e!==t};t.nodeType===kn.window.Node.ELEMENT_NODE&&i();){for(var r=0,s=t.previousSibling;s;s=s.previousSibling)s.nodeType!==kn.window.Node.DOCUMENT_TYPE_NODE&&s.nodeName===t.nodeName&&++r;var o=t.nodeName.toLowerCase(),a="["+(r+1)+"]";(0,Un.isSVG)(t)&&(o="*[local-name()='"+o+"']"),n.unshift(o+a),t=t.parentNode}return 0===n.length?null:e?n.join("/"):"/"+n.join("/")}function J(t){"use strict";var e=arguments.length>1&&arguments[1]!==kn.undefined?arguments[1]:null;e||(e=kn.document.body);var n=kn.document.evaluate(t,e,null,kn.window.XPathResult.ANY_TYPE,null);return n.iterateNext()}function Z(t){"use strict";var e=arguments.length>1&&arguments[1]!==kn.undefined?arguments[1]:null,n=arguments.length>2&&arguments[2]!==kn.undefined?arguments[2]:[];return t?function(i){var r;kn.Object.defineProperties(i.prototype,(r={},Q(r,"_"+t,{value:e,writable:!0,enumerable:!1,configurable:!0}),Q(r,t,{configurable:!0,get:function(){return this["_"+t]},set:function(e){var i=n.reduce(function(t,n){return n.validator(e)||t.push(n.message),t},[]);if(i.length>0)throw new kn.Error(""+i[0]);this["_"+t]=e}}),r));var s=kn.Object.getOwnPropertyDescriptor(i.prototype,t);kn.Object.defineProperty(i.prototype,t,W(i,t,s))}:W}function Q(t,e,n){"use strict";return e in t?kn.Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function W(t,e,n){"use strict";var i=n.set;if(!E.EventEmitter.prototype.isPrototypeOf(t)&&!E.EventEmitter.prototype.isPrototypeOf(t.prototype))throw new kn.Error("@emitter.emitChange can only be applied to event emitters");return Jn({},n,{configurable:!0,set:function(t){var n=this,r=function(i){return(0,Un.isFunction)(n.toObject)?n.toObject():Q({},e,i!==kn.undefined?i:t)},s=this["_"+e];s&&"function"==typeof s.toArray?s=s.toArray():s&&"function"==typeof s.toObject&&(s=s.toObject());var o=void 0;if(s!==t&&(o=r(s)),i.call(this,t),this._list instanceof ni.default&&this._list._duplicates!==!0)try{this._list.checkOnDuplicates()}catch(t){throw i.call(this,s),t}if(s!==t){var a=s&&(0,Un.isFunction)(s.toObject)?s.toObject():s,c=t&&(0,Un.isFunction)(t.toObject)?t.toObject():t,u={type:e,from:a,to:c},l=void 0;try{l=r()}catch(n){l=Q({},e,t)}var f={previous:o,current:l,changed:u},h=["change",f],p=["change:"+e,f,t];if(this.emit.apply(this,h),this.emit.apply(this,p),this._list&&this._list instanceof E.EventEmitter){var d,v;(d=this._list).emit.apply(d,h),(v=this._list).emit.apply(v,p)}}}})}function $(t){"use strict";if(!(0,In.isBrowser)())return kn.Promise.reject(new kn.Error("Invalid context. jsonLoader can only be used in browser."));if(t in ri)return kn.Promise.resolve(ri[t]);if(t in si)return si[t];var e=new kn.Promise(function(e,n){var i=new XMLHttpRequest;i.onreadystatechange=function(){if(4===this.readyState&&200===this.status)try{var i=kn.JSON.parse(this.responseText);ri[t]=i,e(i),delete si[t]}catch(e){n(new kn.Error("jsonLoader: Invalid json for request "+t))}};try{i.open("GET",kn.encodeURI(t),!0),i.send()}catch(e){n(new kn.Error("Could not open request. Unable to load "+t))}});return si[t]||(si[t]=e),e}function tt(){"use strict";return 1===arguments.length?et.apply(kn.undefined,arguments):nt.apply(kn.undefined,arguments)}function et(t){"use strict";var e=kn.Object.getOwnPropertyNames(t.prototype);return"function"==typeof kn.Object.getOwnPropertySymbols&&(e=e.concat(kn.Object.getOwnPropertySymbols(t.prototype))),e.forEach(function(e){if(!oi.includes(e)){var n=kn.Object.getOwnPropertyDescriptor(t.prototype,e);"function"==typeof n.value&&kn.Object.defineProperty(t.prototype,e,nt(t,e,n))}}),t}function nt(t,e,n){"use strict";var i=n.value;if("function"!=typeof i)throw new kn.Error("@autobind decorator can only be applied to methods not: "+("undefined"==typeof i?"undefined":it(i)));return{configurable:!0,get:function(){if(this===t.prototype||this.hasOwnProperty(e))return i;var n=i.bind(this);return kn.Object.defineProperty(this,e,{value:n,configurable:!0,writable:!0}),n},set:function(){return i}}}function it(t){"use strict";return typeof t}function rt(t){"use strict";var e=arguments.length>1&&arguments[1]!==kn.undefined?arguments[1]:kn.undefined;if(!ai.context.isBrowser())throw new kn.Error("Invalid context. spirit.create() can only be executed in browser.");e instanceof kn.window.HTMLElement||(e=kn.document.body),!kn.Array.isArray(t)&&t.groups&&kn.Array.isArray(t.groups)&&(t=t.groups),kn.Array.isArray(t)||(t=[t]);var n=new yi.Groups(e,[]);return t.forEach(function(t){var i={name:t.name,timeScale:t.timeScale||1,timelines:[]};t.timelines.forEach(function(t){var n=vt(e,t);i.timelines.push({transformObject:n,props:t.props,label:mt(t),path:ai.xpath.getExpression(n,e),id:t.id})});var r=new yi.Group(i);n.add(r)}),n}function st(){"use strict";var t=arguments.length>0&&arguments[0]!==kn.undefined?arguments[0]:{};ot(this,st);var e=at(this,(st.__proto__||kn.Object.getPrototypeOf(st)).call(this));if(e._name="untitled",e._timeScale=1,e._timelines=new hi.default,e.timeline=null,e.setMaxListeners(kn.Infinity),!t.name||"string"!=typeof t.name||""===t.name.trim())throw new kn.Error("Cannot create group without a name.");var n={name:"untitled",timeScale:1,timelines:new hi.default};return kn.Object.assign(e,Jn({},n,t)),e}function ot(t,e){"use strict";if(!(t instanceof e))throw new kn.TypeError("Cannot call a class as a function")}function at(t,e){"use strict";if(!t)throw new kn.ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function ct(){"use strict";var t=arguments.length>0&&arguments[0]!==kn.undefined?arguments[0]:[];return ut(this,ct),lt(this,(ct.__proto__||kn.Object.getPrototypeOf(ct)).call(this,t,li.default,["object",{}]))}function ut(t,e){"use strict";if(!(t instanceof e))throw new kn.TypeError("Cannot call a class as a function")}function lt(t,e){"use strict";if(!t)throw new kn.ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function ft(t){"use strict";return new st(t)}function ht(){"use strict";var t=arguments.length>0&&arguments[0]!==kn.undefined?arguments[0]:kn.document.body,e=arguments.length>1&&arguments[1]!==kn.undefined?arguments[1]:[];pt(this,ht);var n=dt(this,(ht.__proto__||kn.Object.getPrototypeOf(ht)).call(this,e,di.default,[{name:"untitled"}]));if(n.rootEl=null,!(t instanceof kn.window.HTMLElement))throw new kn.Error("No root element provided.");return n.rootEl=t,n.each(function(t){return vi.default.add(t)}),n}function pt(t,e){"use strict";if(!(t instanceof e))throw new kn.TypeError("Cannot call a class as a function")}function dt(t,e){"use strict";if(!t)throw new kn.ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function vt(t,e){"use strict";var n=void 0;if("object"!==e.type){if(e.id&&(n=t.querySelector('[data-spirit-id="'+e.id+'"]'),!n&&!e.path))throw ai.debug&&(kn.console.group("Unable to resolve element by [data-spirit-id] attribute"),kn.console.warn("Timeline: ",e),kn.console.groupEnd()),new kn.Error('Cannot find element with [data-spirit-id="'+e.id+'"]');if(!n&&e.path&&(t===kn.document.body&&(t=kn.undefined),n=ai.xpath.getElement(e.path,t),!n))throw ai.debug&&(kn.console.group("Unable to resolve element by path expression"),kn.console.warn("Timeline: ",e),kn.console.groupEnd()),new kn.Error("Cannot find element with path expression "+e.path);if(!n)throw ai.debug&&(kn.console.group("Unable to resolve element"),kn.console.warn("Timeline: ",e),kn.console.groupEnd()),new kn.Error("Cannot find element.")}return n}function mt(t){"use strict";return"string"==typeof t.label&&t.label.trim().length>0?t.label:t.id?t.id:t.path?t.path:"undefined"}function yt(t){"use strict";var e=arguments.length>1&&arguments[1]!==kn.undefined?arguments[1]:kn.undefined;return ai.context.isBrowser()?(0,ai.jsonloader)(t).then(function(t){return rt(t,e)}):kn.Promise.reject(new kn.Error("Invalid context: spirit.load() can only be executed in browser."))}function bt(){"use strict";_t(this,bt),this.gsap={tween:null,timeline:null,autoInject:!0,autoInjectUrl:"https://cdnjs.cloudflare.com/ajax/libs/gsap/latest/TweenMax.min.js"}}function _t(t,e){"use strict";if(!(t instanceof e))throw new kn.TypeError("Cannot call a class as a function")}function gt(){"use strict";return this._next}function wt(){"use strict";return this._prev}function Ot(){"use strict";return/{(.*?)}/.test(this._value)}function jt(){"use strict";return Et({},this.time+"s",{value:this.value,ease:this.ease})}function Et(t,e,n){"use strict";return e in t?kn.Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kt(){"use strict";ai.events.clearEvents(this,g.Events)}function At(t){"use strict";var e=this,n=function(n){return(0,Un.isFunction)(e.toObject)?e.toObject():Q({},"value",n!==kn.undefined?n:t)},i=this._value;i&&"function"==typeof i.toArray?i=i.toArray():i&&"function"==typeof i.toObject&&(i=i.toObject());var r=void 0;if(i!==t&&(r=n(i)),Ct.call(this,t),this._list instanceof ni.default&&this._list._duplicates!==!0)try{this._list.checkOnDuplicates()}catch(t){throw Ct.call(this,i),t}if(i!==t){var s=i&&(0,Un.isFunction)(i.toObject)?i.toObject():i,o=t&&(0,Un.isFunction)(t.toObject)?t.toObject():t,a={type:"value",from:s,to:o},c=void 0;try{c=n()}catch(e){c=Q({},"value",t)}var u={previous:r,current:c,changed:a},l=["change",u],f=["change:value",u,t];if(this.emit.apply(this,l),this.emit.apply(this,f),this._list&&this._list instanceof E.EventEmitter){var h,p;(h=this._list).emit.apply(h,l),(p=this._list).emit.apply(p,f)}}}function xt(t){"use strict";var e=this,n=function(n){return(0,Un.isFunction)(e.toObject)?e.toObject():Q({},"ease",n!==kn.undefined?n:t)},i=this._ease;i&&"function"==typeof i.toArray?i=i.toArray():i&&"function"==typeof i.toObject&&(i=i.toObject());var r=void 0;if(i!==t&&(r=n(i)),Dt.call(this,t),this._list instanceof ni.default&&this._list._duplicates!==!0)try{this._list.checkOnDuplicates()}catch(t){throw Dt.call(this,i),t}if(i!==t){var s=i&&(0,Un.isFunction)(i.toObject)?i.toObject():i,o=t&&(0,Un.isFunction)(t.toObject)?t.toObject():t,a={type:"ease",from:s,to:o},c=void 0;try{c=n()}catch(e){c=Q({},"ease",t)}var u={previous:r,current:c,changed:a},l=["change",u],f=["change:ease",u,t];if(this.emit.apply(this,l),this.emit.apply(this,f),this._list&&this._list instanceof E.EventEmitter){var h,p;(h=this._list).emit.apply(h,l),(p=this._list).emit.apply(p,f)}}}function Pt(t){"use strict";var e=this,n=function(n){return(0,Un.isFunction)(e.toObject)?e.toObject():Q({},"time",n!==kn.undefined?n:t)},i=this._time;i&&"function"==typeof i.toArray?i=i.toArray():i&&"function"==typeof i.toObject&&(i=i.toObject());var r=void 0;if(i!==t&&(r=n(i)),Gt.call(this,t),this._list instanceof ni.default&&this._list._duplicates!==!0)try{this._list.checkOnDuplicates()}catch(t){throw Gt.call(this,i),t}if(i!==t){var s=i&&(0,Un.isFunction)(i.toObject)?i.toObject():i,o=t&&(0,Un.isFunction)(t.toObject)?t.toObject():t,a={type:"time",from:s,to:o},c=void 0;try{c=n()}catch(e){c=Q({},"time",t)}var u={previous:r,current:c,changed:a},l=["change",u],f=["change:time",u,t];if(this.emit.apply(this,l),this.emit.apply(this,f),this._list&&this._list instanceof E.EventEmitter){var h,p;(h=this._list).emit.apply(h,l),(p=this._list).emit.apply(p,f)}}}function Tt(t){"use strict";var e=this,n=function(n){return(0,Un.isFunction)(e.toObject)?e.toObject():Q({},"keyframes",n!==kn.undefined?n:t)},i=this._keyframes;i&&"function"==typeof i.toArray?i=i.toArray():i&&"function"==typeof i.toObject&&(i=i.toObject());var r=void 0;if(i!==t&&(r=n(i)),Te.call(this,t),this._list instanceof ni.default&&this._list._duplicates!==!0)try{this._list.checkOnDuplicates()}catch(t){throw Te.call(this,i),t}if(i!==t){var s=i&&(0,Un.isFunction)(i.toObject)?i.toObject():i,o=t&&(0,Un.isFunction)(t.toObject)?t.toObject():t,a={type:"keyframes",from:s,to:o},c=void 0;try{c=n()}catch(e){c=Q({},"keyframes",t)}var u={previous:r,current:c,changed:a},l=["change",u],f=["change:keyframes",u,t];if(this.emit.apply(this,l),this.emit.apply(this,f),this._list&&this._list instanceof E.EventEmitter){var h,p;(h=this._list).emit.apply(h,l),(p=this._list).emit.apply(p,f)}}}function Lt(t){"use strict";var e=this,n=function(n){return(0,Un.isFunction)(e.toObject)?e.toObject():Q({},"name",n!==kn.undefined?n:t)},i=this._name;i&&"function"==typeof i.toArray?i=i.toArray():i&&"function"==typeof i.toObject&&(i=i.toObject());var r=void 0;if(i!==t&&(r=n(i)),Bt.call(this,t),this._list instanceof ni.default&&this._list._duplicates!==!0)try{this._list.checkOnDuplicates()}catch(t){throw Bt.call(this,i),t}if(i!==t){var s=i&&(0,Un.isFunction)(i.toObject)?i.toObject():i,o=t&&(0,Un.isFunction)(t.toObject)?t.toObject():t,a={type:"name",from:s,to:o},c=void 0;try{c=n()}catch(e){c=Q({},"name",t)}var u={previous:r,current:c,changed:a},l=["change",u],f=["change:name",u,t];if(this.emit.apply(this,l),this.emit.apply(this,f),this._list&&this._list instanceof E.EventEmitter){var h,p;(h=this._list).emit.apply(h,l),(p=this._list).emit.apply(p,f)}}}function St(t){"use strict";var e=this,n=function(n){return(0,Un.isFunction)(e.toObject)?e.toObject():Q({},"timelines",n!==kn.undefined?n:t)},i=this._timelines;i&&"function"==typeof i.toArray?i=i.toArray():i&&"function"==typeof i.toObject&&(i=i.toObject());var r=void 0;if(i!==t&&(r=n(i)),Ve.call(this,t),this._list instanceof ni.default&&this._list._duplicates!==!0)try{this._list.checkOnDuplicates()}catch(t){throw Ve.call(this,i),t}if(i!==t){var s=i&&(0,Un.isFunction)(i.toObject)?i.toObject():i,o=t&&(0,Un.isFunction)(t.toObject)?t.toObject():t,a={type:"timelines",from:s,to:o},c=void 0;try{c=n()}catch(e){c=Q({},"timelines",t)}var u={previous:r,current:c,changed:a},l=["change",u],f=["change:timelines",u,t];if(this.emit.apply(this,l),this.emit.apply(this,f),this._list&&this._list instanceof E.EventEmitter){var h,p;(h=this._list).emit.apply(h,l),(p=this._list).emit.apply(p,f)}}}function Ft(t){"use strict";var e=this,n=function(n){return(0,Un.isFunction)(e.toObject)?e.toObject():Q({},"timeScale",n!==kn.undefined?n:t)},i=this._timeScale;i&&"function"==typeof i.toArray?i=i.toArray():i&&"function"==typeof i.toObject&&(i=i.toObject());var r=void 0;if(i!==t&&(r=n(i)),Ke.call(this,t),this._list instanceof ni.default&&this._list._duplicates!==!0)try{this._list.checkOnDuplicates()}catch(t){throw Ke.call(this,i),t}if(i!==t){var s=i&&(0,Un.isFunction)(i.toObject)?i.toObject():i,o=t&&(0,Un.isFunction)(t.toObject)?t.toObject():t,a={type:"timeScale",from:s,to:o},c=void 0;try{c=n()}catch(e){c=Q({},"timeScale",t)}var u={previous:r,current:c,changed:a},l=["change",u],f=["change:timeScale",u,t];if(this.emit.apply(this,l),this.emit.apply(this,f),this._list&&this._list instanceof E.EventEmitter){var h,p;(h=this._list).emit.apply(h,l),(p=this._list).emit.apply(p,f)}}}function Mt(t){"use strict";var e=this,n=function(n){return(0,Un.isFunction)(e.toObject)?e.toObject():Q({},"duration",n!==kn.undefined?n:t)},i=this._duration;i&&"function"==typeof i.toArray?i=i.toArray():i&&"function"==typeof i.toObject&&(i=i.toObject());var r=void 0;if(i!==t&&(r=n(i)),ze.call(this,t),this._list instanceof ni.default&&this._list._duplicates!==!0)try{this._list.checkOnDuplicates()}catch(t){throw ze.call(this,i),t}if(i!==t){var s=i&&(0,Un.isFunction)(i.toObject)?i.toObject():i,o=t&&(0,Un.isFunction)(t.toObject)?t.toObject():t,a={type:"duration",from:s,to:o},c=void 0;try{c=n()}catch(e){c=Q({},"duration",t)}var u={previous:r,current:c,changed:a},l=["change",u],f=["change:duration",u,t];if(this.emit.apply(this,l),this.emit.apply(this,f),this._list&&this._list instanceof E.EventEmitter){var h,p;(h=this._list).emit.apply(h,l),(p=this._list).emit.apply(p,f)}}}function It(t){"use strict";var e=this,n=function(n){return(0,Un.isFunction)(e.toObject)?e.toObject():Q({},"name",n!==kn.undefined?n:t)},i=this._name;i&&"function"==typeof i.toArray?i=i.toArray():i&&"function"==typeof i.toObject&&(i=i.toObject());var r=void 0;if(i!==t&&(r=n(i)),Je.call(this,t),this._list instanceof ni.default&&this._list._duplicates!==!0)try{this._list.checkOnDuplicates()}catch(t){throw Je.call(this,i),t}if(i!==t){var s=i&&(0,Un.isFunction)(i.toObject)?i.toObject():i,o=t&&(0,Un.isFunction)(t.toObject)?t.toObject():t,a={type:"name",from:s,to:o},c=void 0;try{c=n()}catch(e){c=Q({},"name",t)}var u={previous:r,current:c,changed:a},l=["change",u],f=["change:name",u,t];if(this.emit.apply(this,l),this.emit.apply(this,f),this._list&&this._list instanceof E.EventEmitter){var h,p;(h=this._list).emit.apply(h,l),(p=this._list).emit.apply(p,f)}}}function Ct(t){"use strict";this._value=t}function Nt(){"use strict";return this._list}function Dt(t){"use strict";var e=Oi.reduce(function(e,n){return n.validator(t)||e.push(n.message),e},[]);if(e.length>0)throw new kn.Error(""+e[0]);this._ease=t}function Gt(t){"use strict";var e=ji.reduce(function(e,n){return n.validator(t)||e.push(n.message),e},[]);if(e.length>0)throw new kn.Error(""+e[0]);this._time=t}function Bt(t){"use strict";var e=Ei.reduce(function(e,n){return n.validator(t)||e.push(n.message),e},[]);if(e.length>0)throw new kn.Error(""+e[0]);this._name=t}function Rt(t){"use strict";return"number"==typeof t}function Ut(t){if(!Yt(t)||t<0||kn.isNaN(t))throw kn.TypeError("n must be a positive number");return this._maxListeners=t,this}function Yt(t){return"number"==typeof t}function qt(t){var e,n,i,r,s,o;if(this._events||(this._events={}),"error"===t&&(!this._events.error||Xt(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof kn.Error)throw e;var a=new kn.Error('Uncaught, unspecified "error" event. ('+e+")");throw a.context=e,a}if(n=this._events[t],Ht(n))return!1;if(Vt(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:r=kn.Array.prototype.slice.call(arguments,1),n.apply(this,r)}else if(Xt(n))for(r=kn.Array.prototype.slice.call(arguments,1),o=n.slice(),i=o.length,s=0;s<i;s++)o[s].apply(this,r);return!0}function Xt(t){return"object"==typeof t&&null!==t}function Ht(t){return void 0===t}function Vt(t){return"function"==typeof t}function Kt(t,e){var n;if(!Vt(e))throw kn.TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,Vt(e.listener)?e.listener:e),this._events[t]?Xt(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,Xt(this._events[t])&&!this._events[t].warned&&(n=Ht(this._maxListeners)?E.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[t].length>n&&(this._events[t].warned=!0,kn.console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof kn.console.trace&&kn.console.trace())),this}function zt(t,e){function n(){this.removeListener(t,n),i||(i=!0,e.apply(this,arguments))}if(!Vt(e))throw kn.TypeError("listener must be a function");var i=!1;return n.listener=e,this.on(t,n),this}function Jt(t,e){var n,i,r,s;if(!Vt(e))throw kn.TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],r=n.length,i=-1,n===e||Vt(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(Xt(n)){for(s=r;s-- >0;)if(n[s]===e||n[s].listener&&n[s].listener===e){i=s;break}if(i<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this}function Zt(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],Vt(n))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this}function Qt(t){var e;return e=this._events&&this._events[t]?Vt(this._events[t])?[this._events[t]]:this._events[t].slice():[]}function Wt(t){if(this._events){var e=this._events[t];if(Vt(e))return 1;if(e)return e.length}return 0}function $t(t){"use strict";var e=this;ai.is.isObject(t)&&!(t instanceof Bn.default)&&kn.Object.keys(t).length>1&&(t=ai.convert.objectToArray(t));
var n=te(y.prototype.__proto__||kn.Object.getPrototypeOf(y.prototype),"add",this).call(this,t),i=function(t){t.mappings=[].concat(ee(e.mappings))};return kn.Array.isArray(n)?n.forEach(i):i(n),n}function te(t,e,n){"use strict";null===t&&(t=kn.Function.prototype);var i=kn.Object.getOwnPropertyDescriptor(t,e);if(i===kn.undefined){var r=kn.Object.getPrototypeOf(t);return null===r?kn.undefined:te(r,e,n)}if("value"in i)return i.value;var s=i.get;return s===kn.undefined?kn.undefined:s.call(n)}function ee(t){"use strict";if(kn.Array.isArray(t)){for(var e=0,n=kn.Array(t.length);e<t.length;e++)n[e]=t[e];return n}return kn.Array.from(t)}function ne(t){"use strict";var e=te(y.prototype.__proto__||kn.Object.getPrototypeOf(y.prototype),"remove",this).call(this,t),n=function(t){t.mappings=[]};return kn.Array.isArray(e)?e.forEach(n):n(e),e}function ie(t){"use strict";var e=kn.parseFloat(t);return this._list.find(function(t){return t.time===e})}function re(){"use strict";return this.list.reduce(function(t,e){return Jn({},t,e.toObject())},{})}function se(){"use strict";this.each(function(t){return t.destroy()}),ai.events.clearEvents(this,y.Events)}function oe(t){"use strict";this._mappings=t,this.each(function(e){e.mappings=[].concat(ee(t))})}function ae(){"use strict";var t=this._duplicates,e=!1,n=!1;if("boolean"==typeof t&&t===!1&&(e=this.list.map(function(t){return{count:1,item:t}}).reduce(function(t,e){return t[e.item]=(t[e.item]||0)+e.count,t},{})),Un.isObject(t)&&t.hasOwnProperty("prop")&&(n=!0,e=this.list.map(function(e){return{count:1,prop:e[t.prop]}}).reduce(function(t,e){return t[e.prop]=(t[e.prop]||0)+e.count,t},{})),e&&kn.Object.keys(e).filter(function(t){return e[t]>1}).length>0){var i=kn.Object.keys(e).find(function(t){return e[t]>1}),r=!!n&&t.prop+": "+i,s=!!this._model&&this.constructor.name+" > "+this._model.name+" > { "+r+" }";throw new kn.Error("List has duplicates. "+s)}}function ce(){"use strict";var t=this._sortOn;"boolean"==typeof t&&t===!0&&(this._list=this._list.sort()),"string"==typeof t&&(this._list=this._list.sort(function(e,n){return e[t]-n[t]})),"function"==typeof t&&(this._list=this._list.sort(t))}function ue(){"use strict";if(this._linkedList)for(var t=0;t<this._list.length;t++){if(!Un.isObject(this._list[t]))throw new kn.Error("Can not link primitives.");this._list[t]._prev=t>0?this._list[t-1]:null,this._list[t]._next=t<this._list.length-1?this._list[t+1]:null}}function le(t){"use strict";if(t>=this._list.length)throw new kn.Error("Index exceeded. Requested "+t+", have length of "+this.length);return this._list[t]}function fe(t){"use strict";var e=this,n=null,i=function(t){var i=void 0;if(e._model)if(t instanceof e._model)i=t,i._list=e,i.setupBubbleEvents&&"function"==typeof i.setupBubbleEvents&&i.setupBubbleEvents();else{if(!Un.isObject(t)||"function"!=typeof e._model.fromObject)throw new kn.Error("Invalid item.");i=e._model.fromObject(t),i._list=e,i.setupBubbleEvents&&"function"==typeof i.setupBubbleEvents&&i.setupBubbleEvents()}else i=t;kn.Array.isArray(n)?n.push(i):n=i,e._list.push(i),e.emit("add",i)};return kn.Array.isArray(t)?(n=[],t.forEach(i)):i(t),this.checkOnDuplicates(),this.sort(),this.linkItems(),n}function he(t){"use strict";var e=this,n=null,i=function(t){var i=function(t){var i=e._list.indexOf(t);i>-1&&(e._list.splice(i,1),t._list&&t._list instanceof A&&(t._list=null),Un.isObject(t)&&("_prev"in t&&delete t._prev,"_next"in t&&delete t._next),e.emit("remove",t),kn.Array.isArray(n)?n.push(t):n=t)};e._model?t instanceof e._model&&i(t):i(t)};return kn.Array.isArray(t)?(n=[],t.forEach(i)):i(t),this.sort(),this.linkItems(),n}function pe(){"use strict";this.each(this.remove.bind(this))}function de(t){"use strict";return[].concat(T(this.list)).forEach(t)}function ve(){"use strict";var t=this._model?this.list.map(function(t){return t.toObject()}):this.list;return t.reduce(function(t,e){if(Un.isObject(e)){var n=Jn({},e);delete n._prev,delete n._next,delete n._list,t.push(n)}else t.push(e);return t},[])}function me(t){"use strict";this._duplicates=t,this.checkOnDuplicates()}function ye(t){"use strict";this._sortOn=t,this.sort()}function be(t){"use strict";this._linkedList=t,this.linkItems()}function _e(t){"use strict";if(!kn.Array.isArray(t))throw new kn.Error("List should be an array");this._list=t,this._linkedList&&this.linkItems(),this.emit("change:list",t)}function ge(){"use strict";return this.list.length}function we(){"use strict";return this._next}function Oe(){"use strict";return this._prev}function je(){"use strict";var t=this;if(this._keyframes instanceof qn.default){ai.events.clearEvents(this._keyframes,qn.default.Events);var e=function(e,n){t._keyframes.on(e,ai.events.bubbleEvent(n,t))};e("change:list","change:keyframes:list"),e("change","change:keyframe"),e("change:time","change:keyframe:time"),e("change:value","change:keyframe:value"),e("change:ease","change:keyframe:ease"),e("add","add:keyframe"),e("remove","remove:keyframe")}}function Ee(){"use strict";var t=this.keyframes?this.keyframes.toObject():{};return ke({},this.name,t)}function ke(t,e,n){"use strict";return e in t?kn.Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ae(){"use strict";return["x","y","z","rotation","rotationZ","rotationX","rotationY","skewX","skewY","scale","scaleX","scaleY"].includes(this.name)}function xe(){"use strict";this._keyframes&&this._keyframes.destroy(),ai.events.clearEvents(this,m.Events)}function Pe(){"use strict";return this._list}function Te(t){"use strict";t instanceof qn.default||(t=new qn.default(t));var e=[];this._keyframes&&(e=this._keyframes.mappings,ai.events.clearEvents(this._keyframes,qn.default.Events),this._keyframes.clear()),this._keyframes=t,this._keyframes.mappings=e,this.setupBubbleEvents()}function Le(t){"use strict";return"string"==typeof t}function Se(t){"use strict";return!/\d+/.test(t)}function Fe(t){"use strict";return this._list.find(function(e){return e.name===t})}function Me(t){"use strict";var e=this;ai.is.isObject(t)&&!(t instanceof Hn.default)&&kn.Object.keys(t).length>1&&(t=ai.convert.objectToArray(t));var n=Ie(p.prototype.__proto__||kn.Object.getPrototypeOf(p.prototype),"add",this).call(this,t),i=function(t){t.keyframes.mappings=[].concat(Ce(e.mappings))};return kn.Array.isArray(n)?n.forEach(i):i(n),n}function Ie(t,e,n){"use strict";null===t&&(t=kn.Function.prototype);var i=kn.Object.getOwnPropertyDescriptor(t,e);if(i===kn.undefined){var r=kn.Object.getPrototypeOf(t);return null===r?kn.undefined:Ie(r,e,n)}if("value"in i)return i.value;var s=i.get;return s===kn.undefined?kn.undefined:s.call(n)}function Ce(t){"use strict";if(kn.Array.isArray(t)){for(var e=0,n=kn.Array(t.length);e<t.length;e++)n[e]=t[e];return n}return kn.Array.from(t)}function Ne(t){"use strict";var e=Ie(p.prototype.__proto__||kn.Object.getPrototypeOf(p.prototype),"remove",this).call(this,t),n=function(t){t.keyframes.mappings=[]};return kn.Array.isArray(e)?e.forEach(n):n(e),e}function De(t){"use strict";return!!this.get(t)}function Ge(){"use strict";return this.list.reduce(function(t,e){return Jn({},t,e.toObject())},{})}function Be(){"use strict";this.each(function(t){return t.destroy()}),ai.events.clearEvents(this,p.Events)}function Re(t){"use strict";this._mappings=t,this.each(function(e){e.keyframes.mappings=[].concat(Ce(t))})}function Ue(){"use strict";var t={type:this.type,transformObject:this.transformObject,props:this.props.toObject(),label:this.label,path:this.path,id:this.id};return kn.Object.keys(t).forEach(function(e){t[e]||delete t[e]}),t}function Ye(){"use strict";this.props instanceof Kn.default&&this.props.each(function(t){return t.destroy()})}function qe(t){"use strict";return this._list.find(function(e){return e.transformObject===t})}function Xe(){"use strict";var t=this.name,e=this.timeScale,n=this.timelines.toArray();return{name:t,timeScale:e,timelines:n}}function He(){"use strict";var t=this;try{if(!Ai.default.gsap.timeline||!Ai.default.gsap.tween)throw ai.debug&&kn.console.warn("\n            Trying to construct group "+this.name+", but GSAP cannot be found.\n            \n            Did you forgot to call spirit.setup() ?\n            \n            @usage\n                \n                spirit.setup().then(function(){\n                  // gsap is loaded here..\n                })\n          "),new kn.Error("GSAP cannot be found");this.timeline&&this.timeline instanceof Ai.default.gsap.timeline?(this.timeline.stop(),this.timeline.kill(),this.timeline.clear()):(this.timeline=new Ai.default.gsap.timeline({paused:!0}),this.timeline.autoRemoveChildren=!1),this.timelines.each(function(e){if("dom"===e.type){var n=e.transformObject;if(!(n instanceof kn.window.Element))throw new kn.Error("transformObject is not an Element");Ai.default.gsap.tween.killTweensOf(n),delete n._gsTransform,delete n._gsTweenID,n.setAttribute("style",""),t.timeline.add(ai.gsap.generateTimeline(e).play(),0,"start")}}),this.timeline.timeScale(this.timeScale),this._duration=this.timeline.duration()}catch(t){throw new kn.Error("Could not construct timeline: "+t.message)}return this.emit("construct",this.timeline),this.timeline}function Ve(t){"use strict";t instanceof hi.default||(t=new hi.default(kn.Array.from(t))),this._timelines=t}function Ke(t){"use strict";if("number"!=typeof t||!kn.isFinite(t))throw new kn.Error("timeScale needs to be a number");this.timeline&&this.timeline instanceof Ai.default.gsap.timeline&&this.timeline.timeScale(t),this._timeScale=t}function ze(t){"use strict";this.timeline&&this.timeline instanceof Ai.default.gsap.timeline&&(this.timeline.duration(t),this.timeScale=this.timeline.timeScale(),this._duration=this.timeline.duration())}function Je(t){"use strict";if("string"!=typeof t)throw new kn.Error("Name needs to be a string");this._name=t}function Ze(t){"use strict";var e=Qe(ht.prototype.__proto__||kn.Object.getPrototypeOf(ht.prototype),"add",this).call(this,t);return kn.Array.isArray(e)?e.forEach(function(t){return vi.default.add(t)}):vi.default.add(e),e}function Qe(t,e,n){"use strict";null===t&&(t=kn.Function.prototype);var i=kn.Object.getOwnPropertyDescriptor(t,e);if(i===kn.undefined){var r=kn.Object.getPrototypeOf(t);return null===r?kn.undefined:Qe(r,e,n)}if("value"in i)return i.value;var s=i.get;return s===kn.undefined?kn.undefined:s.call(n)}function We(t){"use strict";var e=Qe(ht.prototype.__proto__||kn.Object.getPrototypeOf(ht.prototype),"remove",this).call(this,t);return kn.Array.isArray(e)?e.forEach(function(t){return vi.default.remove(t)}):vi.default.remove(e),e}function $e(){"use strict";if(!xi.default.gsap.timeline||!xi.default.gsap.tween)throw ai.debug&&kn.console.warn("\n            Trying to construct groups, but GSAP cannot be found.\n            \n            Did you forgot to call spirit.setup() ?\n            \n            spirit.setup() usage:\n            \n                // auto inject gsap from cdn:\n                spirit.setup()\n                \n                // or provide gsap instances manually:\n                spirit.setup({\n                  tween:    TweenMax,\n                  timeline: TimelineMax\n                })\n          "),new kn.Error("GSAP cannot be found");return this.list.map(function(t){return t.construct()})}function tn(t){"use strict";return this.list.find(function(e){return e.name===t})}function en(){"use strict";this.config=Pi.default,this.version="2.0.0",this.setup=Ti.default,this.groups=Li.default,this.create=Si.create,this.load=Si.load}function nn(){"use strict";return rn(this,nn),sn(this,(nn.__proto__||kn.Object.getPrototypeOf(nn)).call(this,[]))}function rn(t,e){"use strict";if(!(t instanceof e))throw new kn.TypeError("Cannot call a class as a function")}function sn(t,e){"use strict";if(!t)throw new kn.ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function on(t){"use strict";if(!(t instanceof yi.Group))throw new kn.Error("Invalid group. Only Group instances allowed.");this.groupNames().includes(t.name)?ai.debug&&kn.console.warn('registry.add() Group "'+t.name+'" already exist in registry. Skip registry (spirit.groups)'):(ai.debug&&kn.console.warn('registry.add() Group "'+t.name+'" added to registry (spirit.groups) and can be resolved by Spirit app'),an(nn.prototype.__proto__||kn.Object.getPrototypeOf(nn.prototype),"add",this).call(this,t))}function an(t,e,n){"use strict";null===t&&(t=kn.Function.prototype);var i=kn.Object.getOwnPropertyDescriptor(t,e);if(i===kn.undefined){var r=kn.Object.getPrototypeOf(t);return null===r?kn.undefined:an(r,e,n)}if("value"in i)return i.value;var s=i.get;return s===kn.undefined?kn.undefined:s.call(n)}function cn(t){"use strict";return this.list.find(function(e){return e.name===t})}function un(){"use strict";return this.list.map(function(t){return t.name})}function ln(){"use strict";return this._name}function fn(){"use strict";return this.timeline?this.timeline.duration():0}function hn(){"use strict";return this._timeScale}function pn(){"use strict";return this._timelines}function dn(){"use strict";return this._mappings}function vn(){return s.call(this,"name")}function mn(){return s.call(this,"time")}function yn(){return s.call(this,"ease")}function bn(){"use strict";return this._keyframes}function _n(){"use strict";return this._list}function gn(){"use strict";return this._linkedList}function wn(){"use strict";return this._sortOn}function On(){"use strict";return this._duplicates}function jn(){"use strict";return this._mappings}function En(){"use strict";var t=this;if(this.isEval()){var e=this.mappings.reduce(function(e,n){return n.regex.global&&(n.regex.lastIndex=0),n.regex.test(t._value)&&(e[n.regex]=n),e},{}),n=this._value;for(var i in e)n=n.replace(e[i].regex,"mappings["+i+"].map");var r=void 0;try{r=kn.eval(n)}catch(t){if(this.mappings.length>0)throw t}return r}return this._value}var kn=this,An=Object.setPrototypeOf,xn=Object.defineProperty,Pn=h.prototype,Tn=E.prototype,Ln=bt.prototype,Sn=en.prototype,Fn={gsap:{tween:null,timeline:null,autoInject:!0,autoInjectUrl:"https://cdnjs.cloudflare.com/ajax/libs/gsap/latest/TweenMax.min.js"}},Mn=this,In={isBrowser:a},Cn=i(),Nn=r(!1),Dn=r(l),Gn={};g.prototype=Gn,g.fromObject=j,g.Events=["change","change:time","change:value","change:ease"],E.EventEmitter=E,E.defaultMaxListeners=10,E.listenerCount=k,An(g,E);var Bn=r(g),Rn={};y.prototype=Rn,y.Events=["change:list","add","remove","change","change:time","change:value","change:ease"];var Un={isObject:L,isSVG:S,isFunction:F},Yn={};A.prototype=Yn,A.Events=["change:list","add","remove"],An(A,E),An(y,A);var qn=r(y),Xn={};m.prototype=Xn,m.fromObject=C,m.Events=["change","change:name","change:keyframes","change:keyframes:list","change:keyframe","change:keyframe:time","change:keyframe:value","change:keyframe:ease","add:keyframe","remove:keyframe"],An(m,E);var Hn=r(m),Vn={};p.prototype=Vn,p.Events=["change:list","add","remove","change","change:name","change:keyframes","change:keyframes:list","change:keyframe","change:keyframe:time","change:keyframe:value","change:keyframe:ease","add:keyframe","remove:keyframe"],An(p,A);var Kn=r(p),zn=r(D),Jn=Object.assign;h.fromObject=B;var Zn=n(),Qn={has:c,ensure:u,generateTimeline:f},Wn=e(),$n={bubbleEvent:U,createEventObjectForModel:Y,clearEvents:X},ti={objectToArray:H,arrayToObject:K},ei={getExpression:z,getElement:J},ni=e(),ii={emitChange:Z},ri={},si={},oi=["constructor"],ai={context:In,gsap:Qn,events:$n,convert:ti,xpath:ei,is:Un,emitter:ii,loadscript:l,jsonloader:$,autobind:tt,debug:!1},ci=i(),ui={_events:{},_maxListeners:1/0,_list:[],_model:null,_duplicates:!0,_sortOn:!1,_linkedList:!1},li=n(),fi={};ct.prototype=fi,An(ct,A);var hi=r(ct),pi={};st.prototype=pi,st.fromObject=ft,An(st,E);var di=r(st),vi=t(),mi={};ht.prototype=mi,An(ht,A);var yi={EvalMap:D,Group:st,Groups:ht,Keyframe:g,Keyframes:y,Prop:m,Props:p,Timeline:h,Timelines:ct},bi={config:Fn,version:"2.0.0",setup:o,groups:ui,create:rt,load:yt},_i={enumerable:!1,configurable:!1,writable:!1};_i.value=!0,xn(In,"__esModule",_i);var gi={enumerable:!1,configurable:!0,writable:!0};gi.value=g,xn(Gn,"constructor",gi);var wi={enumerable:!1,configurable:!0};wi.set=void 0,gi.value=null,xn(Gn,"_ease",gi);var Oi=[];gi.value=null,xn(Gn,"_time",gi);var ji=[{validator:Rt,message:"Time must be a number"}];An(Gn,Tn),Tn._events=void 0,Tn._maxListeners=void 0,Tn.on=Kt,gi.value=y,xn(Rn,"constructor",gi),An(Rn,Yn),_i.value=!0,xn(Un,"__esModule",_i),gi.value=A,xn(Yn,"constructor",gi),wi.set=void 0,An(Yn,Tn),gi.value=m,xn(Xn,"constructor",gi),wi.set=void 0,gi.value=null,xn(Xn,"_name",gi);var Ei=[{validator:Le,message:"Name must be a string"},{validator:Se,message:"Name must be a string"}];An(Xn,Tn),gi.value=p,xn(Vn,"constructor",gi),An(Vn,Yn),_i.value=!0,xn(Qn,"__esModule",_i),_i.value=!0,xn($n,"__esModule",_i),_i.value=!0,xn(ti,"__esModule",_i),_i.value=!0,xn(ei,"__esModule",_i),_i.value=!0,xn(ii,"__esModule",_i),_i.value=!0,xn(ai,"__esModule",_i);var ki={};gi.value=ct,xn(fi,"constructor",gi),An(fi,Yn),gi.value=st,xn(pi,"constructor",gi);var Ai=i();An(pi,Tn),_i.value=!0,xn(vi,"__esModule",_i),gi.value=ht,xn(mi,"constructor",gi);var xi=i();An(mi,Yn),_i.value=!0,xn(yi,"__esModule",_i);var Pi=i(),Ti=r(o),Li=t(),Si={create:rt,load:yt};nn.prototype=ki,An(nn,A),An(ki,Yn),_i.value=!0,xn(Si,"__esModule",_i),gi.value=un,xn(ki,"groupNames",gi),gi.value=cn,xn(ki,"get",gi),gi.value=on,xn(ki,"add",gi),gi.value=nn,xn(ki,"constructor",gi),An(bi,Sn),gi.value=tn,xn(mi,"get",gi),gi.value=$e,xn(mi,"construct",gi),gi.value=We,xn(mi,"remove",gi),gi.value=Ze,xn(mi,"add",gi),wi.set=It,wi.get=ln,xn(pi,"name",wi),wi.set=Mt,wi.get=fn,xn(pi,"duration",wi),wi.set=Ft,wi.get=hn,xn(pi,"timeScale",wi),wi.set=St,wi.get=pn,xn(pi,"timelines",wi),gi.value=He,xn(pi,"construct",gi),gi.value=Xe,xn(pi,"toObject",gi),gi.value=qe,xn(fi,"get",gi),An(ui,ki),gi.value=Ye,xn(Pn,"destroy",gi),gi.value=Ue,xn(Pn,"toObject",gi),wi.set=Re,wi.get=dn,xn(Vn,"mappings",wi),gi.value=Be,xn(Vn,"destroy",gi),gi.value=Ge,xn(Vn,"toObject",gi),gi.value=De,xn(Vn,"haveProp",gi),gi.value=Ne,xn(Vn,"remove",gi),gi.value=Me,xn(Vn,"add",gi),gi.value=Fe,xn(Vn,"get",gi),wi.set=Lt,wi.get=vn,xn(Xn,"name",wi),wi.set=Tt,wi.get=bn,xn(Xn,"keyframes",wi),wi.get=Pe,xn(Xn,"list",wi),gi.value=xe,xn(Xn,"destroy",gi),gi.value=Ae,xn(Xn,"isCSSTransform",gi),gi.value=Ee,xn(Xn,"toObject",gi),gi.value=je,xn(Xn,"setupBubbleEvents",gi),gi.value=Oe,xn(Xn,"prev",gi),gi.value=we,xn(Xn,"next",gi),wi.get=ge,xn(Yn,"length",wi),wi.set=_e,wi.get=_n,xn(Yn,"list",wi),wi.set=be,wi.get=gn,xn(Yn,"linkedList",wi),wi.set=ye,wi.get=wn,xn(Yn,"sortOn",wi),wi.set=me,wi.get=On,xn(Yn,"duplicates",wi),gi.value=ve,xn(Yn,"toArray",gi),gi.value=de,xn(Yn,"each",gi),gi.value=pe,xn(Yn,"clear",gi),gi.value=he,xn(Yn,"remove",gi),gi.value=fe,xn(Yn,"add",gi),gi.value=le,xn(Yn,"at",gi),gi.value=ue,xn(Yn,"linkItems",gi),gi.value=ce,xn(Yn,"sort",gi),gi.value=ae,xn(Yn,"checkOnDuplicates",gi),wi.set=oe,wi.get=jn,xn(Rn,"mappings",wi),gi.value=se,xn(Rn,"destroy",gi),gi.value=re,xn(Rn,"toObject",gi),gi.value=ie,xn(Rn,"get",gi),gi.value=ne,xn(Rn,"remove",gi),gi.value=$t,xn(Rn,"add",gi),Tn.listenerCount=Wt,Tn.listeners=Qt,Tn.removeAllListeners=Zt,Tn.removeListener=Jt,Tn.once=zt,Tn.addListener=Kt,Tn.emit=qt,Tn.setMaxListeners=Ut,wi.set=Pt,wi.get=mn,xn(Gn,"time",wi),wi.set=xt,wi.get=yn,xn(Gn,"ease",wi),wi.get=Nt,xn(Gn,"list",wi),wi.set=At,wi.get=En,xn(Gn,"value",wi),gi.value=kt,xn(Gn,"destroy",gi),gi.value=jt,xn(Gn,"toObject",gi),gi.value=Ot,xn(Gn,"isEval",gi),gi.value=wt,xn(Gn,"prev",gi),gi.value=gt,xn(Gn,"next",gi),An(Fn,Ln),spirit=bi}).call(this);